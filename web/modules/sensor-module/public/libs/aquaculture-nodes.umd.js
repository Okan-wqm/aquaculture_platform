(function(S,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("react"),require("reactflow")):typeof define=="function"&&define.amd?define(["exports","react","reactflow"],a):(S=typeof globalThis<"u"?globalThis:S||self,a(S.AquacultureNodes={},S.React,S.ReactFlow))})(this,function(S,a,i){"use strict";var Me={exports:{}},ye={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt;function ls(){if(Gt)return ye;Gt=1;var o=a,t=Symbol.for("react.element"),y=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,h=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n={key:!0,ref:!0,__self:!0,__source:!0};function r(c,d,x){var l,k={},u=null,f=null;x!==void 0&&(u=""+x),d.key!==void 0&&(u=""+d.key),d.ref!==void 0&&(f=d.ref);for(l in d)p.call(d,l)&&!n.hasOwnProperty(l)&&(k[l]=d[l]);if(c&&c.defaultProps)for(l in d=c.defaultProps,d)k[l]===void 0&&(k[l]=d[l]);return{$$typeof:t,type:c,key:u,ref:f,props:k,_owner:h.current}}return ye.Fragment=y,ye.jsx=r,ye.jsxs=r,ye}var ge={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lt;function cs(){return Lt||(Lt=1,process.env.NODE_ENV!=="production"&&function(){var o=a,t=Symbol.for("react.element"),y=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),l=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),g=Symbol.iterator,m="@@iterator";function b(s){if(s===null||typeof s!="object")return null;var T=g&&s[g]||s[m];return typeof T=="function"?T:null}var v=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function j(s){{for(var T=arguments.length,W=new Array(T>1?T-1:0),A=1;A<T;A++)W[A-1]=arguments[A];D("error",s,W)}}function D(s,T,W){{var A=v.ReactDebugCurrentFrame,N=A.getStackAddendum();N!==""&&(T+="%s",W=W.concat([N]));var G=W.map(function(_){return String(_)});G.unshift("Warning: "+T),Function.prototype.apply.call(console[s],console,G)}}var E=!1,C=!1,P=!1,L=!1,z=!1,Y;Y=Symbol.for("react.module.reference");function O(s){return!!(typeof s=="string"||typeof s=="function"||s===p||s===n||z||s===h||s===x||s===l||L||s===f||E||C||P||typeof s=="object"&&s!==null&&(s.$$typeof===u||s.$$typeof===k||s.$$typeof===r||s.$$typeof===c||s.$$typeof===d||s.$$typeof===Y||s.getModuleId!==void 0))}function R(s,T,W){var A=s.displayName;if(A)return A;var N=T.displayName||T.name||"";return N!==""?W+"("+N+")":W}function w(s){return s.displayName||"Context"}function F(s){if(s==null)return null;if(typeof s.tag=="number"&&j("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case p:return"Fragment";case y:return"Portal";case n:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case l:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case c:var T=s;return w(T)+".Consumer";case r:var W=s;return w(W._context)+".Provider";case d:return R(s,s.render,"ForwardRef");case k:var A=s.displayName||null;return A!==null?A:F(s.type)||"Memo";case u:{var N=s,G=N._payload,_=N._init;try{return F(_(G))}catch{return null}}}return null}var M=Object.assign,B=0,U,Q,J,X,K,te,ie;function ae(){}ae.__reactDisabledLog=!0;function ve(){{if(B===0){U=console.log,Q=console.info,J=console.warn,X=console.error,K=console.group,te=console.groupCollapsed,ie=console.groupEnd;var s={configurable:!0,enumerable:!0,value:ae,writable:!0};Object.defineProperties(console,{info:s,log:s,warn:s,error:s,group:s,groupCollapsed:s,groupEnd:s})}B++}}function pe(){{if(B--,B===0){var s={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},s,{value:U}),info:M({},s,{value:Q}),warn:M({},s,{value:J}),error:M({},s,{value:X}),group:M({},s,{value:K}),groupCollapsed:M({},s,{value:te}),groupEnd:M({},s,{value:ie})})}B<0&&j("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var fe=v.ReactCurrentDispatcher,Mt;function Fe(s,T,W){{if(Mt===void 0)try{throw Error()}catch(N){var A=N.stack.trim().match(/\n( *(at )?)/);Mt=A&&A[1]||""}return`
`+Mt+s}}var It=!1,Re;{var Ns=typeof WeakMap=="function"?WeakMap:Map;Re=new Ns}function $o(s,T){if(!s||It)return"";{var W=Re.get(s);if(W!==void 0)return W}var A;It=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var G;G=fe.current,fe.current=null,ve();try{if(T){var _=function(){throw Error()};if(Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(q){A=q}Reflect.construct(s,[],_)}else{try{_.call()}catch(q){A=q}s.call(_.prototype)}}else{try{throw Error()}catch(q){A=q}s()}}catch(q){if(q&&A&&typeof q.stack=="string"){for(var I=q.stack.split(`
`),Z=A.stack.split(`
`),$=I.length-1,V=Z.length-1;$>=1&&V>=0&&I[$]!==Z[V];)V--;for(;$>=1&&V>=0;$--,V--)if(I[$]!==Z[V]){if($!==1||V!==1)do if($--,V--,V<0||I[$]!==Z[V]){var re=`
`+I[$].replace(" at new "," at ");return s.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",s.displayName)),typeof s=="function"&&Re.set(s,re),re}while($>=1&&V>=0);break}}}finally{It=!1,fe.current=G,pe(),Error.prepareStackTrace=N}var xe=s?s.displayName||s.name:"",he=xe?Fe(xe):"";return typeof s=="function"&&Re.set(s,he),he}function Bs(s,T,W){return $o(s,!1)}function Os(s){var T=s.prototype;return!!(T&&T.isReactComponent)}function Pe(s,T,W){if(s==null)return"";if(typeof s=="function")return $o(s,Os(s));if(typeof s=="string")return Fe(s);switch(s){case x:return Fe("Suspense");case l:return Fe("SuspenseList")}if(typeof s=="object")switch(s.$$typeof){case d:return Bs(s.render);case k:return Pe(s.type,T,W);case u:{var A=s,N=A._payload,G=A._init;try{return Pe(G(N),T,W)}catch{}}}return""}var Te=Object.prototype.hasOwnProperty,Vo={},Xo=v.ReactDebugCurrentFrame;function Ae(s){if(s){var T=s._owner,W=Pe(s.type,s._source,T?T.type:null);Xo.setExtraStackFrame(W)}else Xo.setExtraStackFrame(null)}function Gs(s,T,W,A,N){{var G=Function.call.bind(Te);for(var _ in s)if(G(s,_)){var I=void 0;try{if(typeof s[_]!="function"){var Z=Error((A||"React class")+": "+W+" type `"+_+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof s[_]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Z.name="Invariant Violation",Z}I=s[_](T,_,A,W,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch($){I=$}I&&!(I instanceof Error)&&(Ae(N),j("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",A||"React class",W,_,typeof I),Ae(null)),I instanceof Error&&!(I.message in Vo)&&(Vo[I.message]=!0,Ae(N),j("Failed %s type: %s",W,I.message),Ae(null))}}}var Ls=Array.isArray;function Ht(s){return Ls(s)}function zs(s){{var T=typeof Symbol=="function"&&Symbol.toStringTag,W=T&&s[Symbol.toStringTag]||s.constructor.name||"Object";return W}}function Us(s){try{return Qo(s),!1}catch{return!0}}function Qo(s){return""+s}function Jo(s){if(Us(s))return j("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",zs(s)),Qo(s)}var Zo=v.ReactCurrentOwner,Ys={key:!0,ref:!0,__self:!0,__source:!0},Ko,qo;function $s(s){if(Te.call(s,"ref")){var T=Object.getOwnPropertyDescriptor(s,"ref").get;if(T&&T.isReactWarning)return!1}return s.ref!==void 0}function Vs(s){if(Te.call(s,"key")){var T=Object.getOwnPropertyDescriptor(s,"key").get;if(T&&T.isReactWarning)return!1}return s.key!==void 0}function Xs(s,T){typeof s.ref=="string"&&Zo.current}function Qs(s,T){{var W=function(){Ko||(Ko=!0,j("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};W.isReactWarning=!0,Object.defineProperty(s,"key",{get:W,configurable:!0})}}function Js(s,T){{var W=function(){qo||(qo=!0,j("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",T))};W.isReactWarning=!0,Object.defineProperty(s,"ref",{get:W,configurable:!0})}}var Zs=function(s,T,W,A,N,G,_){var I={$$typeof:t,type:s,key:T,ref:W,props:_,_owner:G};return I._store={},Object.defineProperty(I._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(I,"_self",{configurable:!1,enumerable:!1,writable:!1,value:A}),Object.defineProperty(I,"_source",{configurable:!1,enumerable:!1,writable:!1,value:N}),Object.freeze&&(Object.freeze(I.props),Object.freeze(I)),I};function Ks(s,T,W,A,N){{var G,_={},I=null,Z=null;W!==void 0&&(Jo(W),I=""+W),Vs(T)&&(Jo(T.key),I=""+T.key),$s(T)&&(Z=T.ref,Xs(T,N));for(G in T)Te.call(T,G)&&!Ys.hasOwnProperty(G)&&(_[G]=T[G]);if(s&&s.defaultProps){var $=s.defaultProps;for(G in $)_[G]===void 0&&(_[G]=$[G])}if(I||Z){var V=typeof s=="function"?s.displayName||s.name||"Unknown":s;I&&Qs(_,V),Z&&Js(_,V)}return Zs(s,I,Z,N,A,Zo.current,_)}}var _t=v.ReactCurrentOwner,es=v.ReactDebugCurrentFrame;function ue(s){if(s){var T=s._owner,W=Pe(s.type,s._source,T?T.type:null);es.setExtraStackFrame(W)}else es.setExtraStackFrame(null)}var Nt;Nt=!1;function Bt(s){return typeof s=="object"&&s!==null&&s.$$typeof===t}function ts(){{if(_t.current){var s=F(_t.current.type);if(s)return`

Check the render method of \``+s+"`."}return""}}function qs(s){return""}var os={};function ei(s){{var T=ts();if(!T){var W=typeof s=="string"?s:s.displayName||s.name;W&&(T=`

Check the top-level render call using <`+W+">.")}return T}}function ss(s,T){{if(!s._store||s._store.validated||s.key!=null)return;s._store.validated=!0;var W=ei(T);if(os[W])return;os[W]=!0;var A="";s&&s._owner&&s._owner!==_t.current&&(A=" It was passed a child from "+F(s._owner.type)+"."),ue(s),j('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',W,A),ue(null)}}function is(s,T){{if(typeof s!="object")return;if(Ht(s))for(var W=0;W<s.length;W++){var A=s[W];Bt(A)&&ss(A,T)}else if(Bt(s))s._store&&(s._store.validated=!0);else if(s){var N=b(s);if(typeof N=="function"&&N!==s.entries)for(var G=N.call(s),_;!(_=G.next()).done;)Bt(_.value)&&ss(_.value,T)}}}function ti(s){{var T=s.type;if(T==null||typeof T=="string")return;var W;if(typeof T=="function")W=T.propTypes;else if(typeof T=="object"&&(T.$$typeof===d||T.$$typeof===k))W=T.propTypes;else return;if(W){var A=F(T);Gs(W,s.props,"prop",A,s)}else if(T.PropTypes!==void 0&&!Nt){Nt=!0;var N=F(T);j("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",N||"Unknown")}typeof T.getDefaultProps=="function"&&!T.getDefaultProps.isReactClassApproved&&j("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function oi(s){{for(var T=Object.keys(s.props),W=0;W<T.length;W++){var A=T[W];if(A!=="children"&&A!=="key"){ue(s),j("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",A),ue(null);break}}s.ref!==null&&(ue(s),j("Invalid attribute `ref` supplied to `React.Fragment`."),ue(null))}}var rs={};function ns(s,T,W,A,N,G){{var _=O(s);if(!_){var I="";(s===void 0||typeof s=="object"&&s!==null&&Object.keys(s).length===0)&&(I+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Z=qs();Z?I+=Z:I+=ts();var $;s===null?$="null":Ht(s)?$="array":s!==void 0&&s.$$typeof===t?($="<"+(F(s.type)||"Unknown")+" />",I=" Did you accidentally export a JSX literal instead of a component?"):$=typeof s,j("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",$,I)}var V=Ks(s,T,W,N,G);if(V==null)return V;if(_){var re=T.children;if(re!==void 0)if(A)if(Ht(re)){for(var xe=0;xe<re.length;xe++)is(re[xe],s);Object.freeze&&Object.freeze(re)}else j("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else is(re,s)}if(Te.call(T,"key")){var he=F(s),q=Object.keys(T).filter(function(ci){return ci!=="key"}),Ot=q.length>0?"{key: someKey, "+q.join(": ..., ")+": ...}":"{key: someKey}";if(!rs[he+Ot]){var li=q.length>0?"{"+q.join(": ..., ")+": ...}":"{}";j(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ot,he,li,he),rs[he+Ot]=!0}}return s===p?oi(V):ti(V),V}}function si(s,T,W){return ns(s,T,W,!0)}function ii(s,T,W){return ns(s,T,W,!1)}var ri=ii,ni=si;ge.Fragment=p,ge.jsx=ri,ge.jsxs=ni}()),ge}process.env.NODE_ENV==="production"?Me.exports=ls():Me.exports=cs();var e=Me.exports;const zt={tank:1,pump:2,filtration:3,aeration:4,heating_cooling:5,disinfection:6,water_treatment:7,feeding:8,power:9,monitoring:10,distribution:11,utility:12,algae:13,equipment:14},Ut={tank:{en:"Tanks",tr:"Tanklar"},pump:{en:"Pumps",tr:"Pompalar"},filtration:{en:"Filtration",tr:"Filtrasyon"},aeration:{en:"Aeration",tr:"Havalandirma"},heating_cooling:{en:"Heating/Cooling",tr:"Isitma/Sogutma"},disinfection:{en:"Disinfection",tr:"Dezenfeksiyon"},water_treatment:{en:"Water Treatment",tr:"Su Aritma"},feeding:{en:"Feeding",tr:"Besleme"},power:{en:"Power",tr:"Guc"},monitoring:{en:"Monitoring",tr:"Izleme"},distribution:{en:"Distribution",tr:"Dagitim"},utility:{en:"Utility",tr:"Yardimci"},algae:{en:"Algae",tr:"Alg"},equipment:{en:"Equipment",tr:"Ekipman"}},ne=new Map,Ie=new Map,H={register(o){if(!o.id||!o.component)throw new Error(`NodeRegistry: id and component are required. Got id=${o.id}`);ne.has(o.id)&&console.warn(`NodeRegistry: Overwriting existing node type "${o.id}"`);const t={defaultSize:{width:150,height:100},minSize:{width:100,height:75},hideFromPalette:!1,...o};ne.set(o.id,t),o.equipmentTypeCodes&&o.equipmentTypeCodes.forEach(y=>{Ie.set(y.toLowerCase(),o.id)})},get(o){return ne.get(o)},getAll(){return Array.from(ne.values())},getByCategory(o){return this.getAll().filter(t=>t.category===o)},getPaletteNodes(){return this.getAll().filter(o=>!o.hideFromPalette)},getNodeTypes(){const o={};return ne.forEach((t,y)=>{o[y]=t.component}),o},getNodeTypeForEquipment(o){return Ie.get(o.toLowerCase())},getPaletteItems(){return this.getPaletteNodes().map(o=>({id:o.id,label:o.label,labelTr:o.labelTr,category:o.category,description:o.description,icon:o.icon,defaultSize:o.defaultSize}))},getPaletteGroups(){const o=this.getPaletteItems(),t=new Map;o.forEach(p=>{const h=t.get(p.category)||[];h.push(p),t.set(p.category,h)});const y=[];return t.forEach((p,h)=>{const n=Ut[h];y.push({category:h,labelEn:n.en,labelTr:n.tr,order:zt[h],items:p.sort((r,c)=>r.label.localeCompare(c.label))})}),y.sort((p,h)=>p.order-h.order)},has(o){return ne.has(o)},count(){return ne.size},clear(){ne.clear(),Ie.clear()}},He=100,_e=180,ds={green:{primary:"#4CAF50",secondary:"#81C784",bubble:"#C8E6C9"},red:{primary:"#E53935",secondary:"#EF5350",bubble:"#FFCDD2"},yellow:{primary:"#FDD835",secondary:"#FFEE58",bubble:"#FFF9C4"},brown:{primary:"#795548",secondary:"#A1887F",bubble:"#D7CCC8"}},Yt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,r=(t==null?void 0:t.algaeColor)||"green",c=ds[r],[d,x]=a.useState((t==null?void 0:t.topType)||"target"),[l,k]=a.useState((t==null?void 0:t.bottomType)||"source"),u=g=>g==="source"?"#22c55e":"#3b82f6",f=(g,m,b)=>v=>{if(n)return;v.preventDefault(),v.stopPropagation();const j=g==="source"?"target":"source";m(j),h(D=>D.map(E=>E.id===o?{...E,data:{...E.data,[b]:j}}:E))};return a.useEffect(()=>{p(o)},[o,d,l,p]),e.jsxs("div",{style:{width:He,height:_e,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:He,height:_e,viewBox:"0 0 100 180",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`algae-bag-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:c.primary,stopOpacity:.8}),e.jsx("stop",{offset:"50%",stopColor:c.secondary,stopOpacity:.9}),e.jsx("stop",{offset:"100%",stopColor:c.primary,stopOpacity:.8})]})}),e.jsx("rect",{x:20,y:5,width:60,height:10,rx:2,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:20,y:155,width:60,height:10,rx:2,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:18,y:15,width:4,height:140,fill:"#78909C"}),e.jsx("rect",{x:78,y:15,width:4,height:140,fill:"#78909C"}),e.jsx("rect",{x:25,y:15,width:50,height:140,rx:3,fill:`url(#algae-bag-${o})`,stroke:c.primary,strokeWidth:1}),e.jsx("circle",{cx:35,cy:40,r:4,fill:c.bubble,opacity:.7}),e.jsx("circle",{cx:55,cy:60,r:5,fill:c.bubble,opacity:.6}),e.jsx("circle",{cx:45,cy:90,r:4,fill:c.bubble,opacity:.7}),e.jsx("circle",{cx:60,cy:120,r:3,fill:c.bubble,opacity:.5}),e.jsx("circle",{cx:38,cy:130,r:4,fill:c.bubble,opacity:.6}),e.jsx("circle",{cx:50,cy:50,r:3,fill:c.bubble,opacity:.5}),e.jsx("circle",{cx:65,cy:80,r:4,fill:c.bubble,opacity:.6}),e.jsx("text",{x:50,y:175,fontSize:8,fill:"#666",textAnchor:"middle",children:"ðŸ’¡"}),e.jsx("text",{x:50,y:-5,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Algae Bag"})]}),e.jsx("div",{style:{position:"absolute",left:50,top:10,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(d,x,"topType"),children:e.jsx(i.Handle,{id:`algae-top-${d}`,type:d,position:i.Position.Top,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:50,top:160,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(l,k,"bottomType"),children:e.jsx(i.Handle,{id:`algae-bottom-${l}`,type:l,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"algaeBag",label:"Algae Bag",labelTr:"Alg Torbasi",category:"algae",description:"Photobioreactor bag for algae cultivation",component:Yt,defaultSize:{width:He,height:_e},equipmentTypeCodes:["algae_bag","photobioreactor","algae_reactor"]});const Ne=100,Be=140,$t=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.bottomType)||"source"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,bottomType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:Ne,height:Be,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Ne,height:Be,viewBox:"0 0 100 140",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`feeder-hopper-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#455A64"})]}),e.jsxs("linearGradient",{id:`feeder-feed-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8D6E63"}),e.jsx("stop",{offset:"100%",stopColor:"#5D4037"})]})]}),e.jsx("path",{d:"M 20 10 L 80 10 L 65 60 L 35 60 Z",fill:`url(#feeder-hopper-${o})`,stroke:"#37474F",strokeWidth:2}),e.jsx("path",{d:"M 28 25 L 72 25 L 62 55 L 38 55 Z",fill:`url(#feeder-feed-${o})`}),e.jsx("rect",{x:30,y:60,width:40,height:25,rx:3,fill:"#546E7A",stroke:"#37474F",strokeWidth:1}),e.jsx("circle",{cx:50,cy:72,r:8,fill:"#78909C",stroke:"#455A64",strokeWidth:1}),e.jsx("circle",{cx:50,cy:72,r:3,fill:"#263238"}),e.jsx("rect",{x:42,y:85,width:16,height:35,rx:2,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("circle",{cx:46,cy:95,r:2,fill:"#8D6E63"}),e.jsx("circle",{cx:54,cy:100,r:2,fill:"#8D6E63"}),e.jsx("circle",{cx:50,cy:108,r:2,fill:"#8D6E63"}),e.jsx("circle",{cx:48,cy:115,r:2,fill:"#8D6E63"}),e.jsx("text",{x:50,y:135,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Auto Feeder"})]}),e.jsx("div",{style:{position:"absolute",left:50,top:120,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`feeder-out-${r}`,type:r,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"automaticFeeder",label:"Automatic Feeder",labelTr:"Otomatik Yemlik",category:"feeding",description:"Automatic fish feeder with timer",component:$t,defaultSize:{width:Ne,height:Be},equipmentTypeCodes:["automatic_feeder","feeder","auto_feeder"]});function de(o,t,y,p,h){const n=h*Math.PI/180,r=y-o,c=p-t;return{x:r*Math.cos(n)-c*Math.sin(n)+o,y:r*Math.sin(n)+c*Math.cos(n)+t}}function ps(o,t,y,p,h){const n=de(o,t,y,p,h);return{left:n.x,top:n.y}}function hs(o,t,y,p){const h=Math.atan2(p-t,y-o)*(180/Math.PI);return h>=-45&&h<45?i.Position.Right:h>=45&&h<135?i.Position.Bottom:h>=-135&&h<-45?i.Position.Top:i.Position.Left}const Vt=({id:o,selected:t,rotation:y=0,handles:p,render:h,width:n=160,height:r=100,isScadaMode:c=!1})=>{const{setNodes:d}=i.useReactFlow(),x=i.useUpdateNodeInternals(),l=f=>{if(c)return;const g=p.find(v=>v.id===f);if(!g)return;const m=g.type==="source"?"target":"source",b=p.map(v=>v.id===f?{...v,type:m}:v);d(v=>v.map(j=>j.id===o?{...j,data:{...j.data,handles:b}}:j)),x(o)};a.useEffect(()=>{x(o)},[p.map(f=>`${f.id}:${f.type}`).join(","),y,o,x]);const k=n/2,u=r/2;return e.jsxs("div",{style:{width:n,height:r,position:"relative",pointerEvents:"none",border:t?"2px solid #3b82f6":"2px solid transparent",borderRadius:8,transition:"border-color 0.2s"},children:[e.jsx("svg",{width:n,height:r,viewBox:`0 0 ${n} ${r}`,style:{pointerEvents:"auto"},children:e.jsx("g",{transform:`rotate(${y}, ${k}, ${u})`,children:h()})}),p.map(f=>{const g=de(k,u,f.position.x,f.position.y,y),m=f.type==="source"?"#22c55e":"#3b82f6";return e.jsx("div",{style:{position:"absolute",left:g.x,top:g.y,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b=>{b.preventDefault(),b.stopPropagation(),l(f.id)},children:e.jsx(i.Handle,{id:f.id,type:f.type,position:hs(k,u,g.x,g.y),style:{position:"relative",width:"100%",height:"100%",background:m,borderRadius:"50%",border:"2px solid white",cursor:c?"default":"pointer",transform:"none",left:0,top:0}})},f.id)})]})},be=200,je=140,Xt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),[n,r]=a.useState((t==null?void 0:t.inlet)||"target"),[c,d]=a.useState((t==null?void 0:t.outlet)||"source"),x=(t==null?void 0:t.rotation)||0,l=(t==null?void 0:t.isScadaMode)||!1,k=n==="source"?"#22c55e":"#3b82f6",u=c==="source"?"#22c55e":"#3b82f6",f=be/2,g=je/2,m=de(f,g,50,70,x),b=de(f,g,185,70,x),v=E=>{l||h(C=>C.map(P=>P.id===o?{...P,data:{...P.data,...E}}:P))},j=(E,C,P,L)=>{if(l)return;E.preventDefault(),E.stopPropagation();const z=C==="source"?"target":"source";P(z),v({[L]:z})},D=E=>{if(l)return;E.stopPropagation();const C=((x||0)+90)%360;v({rotation:C})};return a.useEffect(()=>{p(o)},[o,n,c,x,p]),e.jsxs("div",{style:{width:be,height:je,position:"relative",pointerEvents:"none",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[!l&&e.jsx("button",{onClick:D,style:{position:"absolute",top:2,right:2,zIndex:10,fontSize:12,cursor:"pointer",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:4,padding:"2px 6px",pointerEvents:"all"},children:"â†»"}),e.jsx("div",{style:{transform:`rotate(${x}deg)`,transformOrigin:"center center",width:be,height:je,pointerEvents:"auto"},children:e.jsxs("svg",{width:be,height:je,children:[e.jsx("rect",{x:"50",y:"40",width:"100",height:"60",rx:"12",fill:"#cfd8dc",stroke:"#444",strokeWidth:"2"}),e.jsx("circle",{cx:"75",cy:"70",r:"18",fill:"#90caf9",stroke:"#333",strokeWidth:"1.5"}),e.jsx("path",{d:"M75 52 A18 18 0 0 1 75 88 A18 18 0 0 1 75 52",fill:"none",stroke:"#1976d2",strokeWidth:"1"}),e.jsx("circle",{cx:"125",cy:"70",r:"18",fill:"#90caf9",stroke:"#333",strokeWidth:"1.5"}),e.jsx("path",{d:"M125 52 A18 18 0 0 1 125 88 A18 18 0 0 1 125 52",fill:"none",stroke:"#1976d2",strokeWidth:"1"}),e.jsx("circle",{cx:"100",cy:"70",r:"6",fill:"#455a64",stroke:"#222",strokeWidth:"1.5"}),e.jsx("rect",{x:"150",y:"50",width:"35",height:"40",rx:"4",fill:"#90a4ae",stroke:"#333",strokeWidth:"2"}),e.jsx("circle",{cx:"168",cy:"70",r:"6",fill:"#212121"}),e.jsx("text",{x:"168",y:"75",fontSize:"9",fill:"#fff",textAnchor:"middle",children:"M"}),e.jsx("text",{x:"100",y:"125",textAnchor:"middle",fontSize:"12",fill:"#000",children:(t==null?void 0:t.label)||"Lobe Blower"})]})}),e.jsx("div",{style:{position:"absolute",left:m.x,top:m.y,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:E=>j(E,n,r,"inlet"),children:e.jsx(i.Handle,{id:`blower-inlet-${n}`,type:n,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:k,borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:b.x,top:b.y,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:E=>j(E,c,d,"outlet"),children:e.jsx(i.Handle,{id:`blower-outlet-${c}`,type:c,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u,borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"blower",label:"Lobe Blower",labelTr:"Root Blower",category:"aeration",description:"Lobe blower with rotation support and toggleable inlet/outlet handles",component:Xt,defaultSize:{width:be,height:je},minSize:{width:150,height:100},equipmentTypeCodes:["blower","root_blower","lobe_blower"]});const Oe=160,Ge=120,Qt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:Oe,height:Ge,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Oe,height:Ge,viewBox:"0 0 160 120",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`chiller-body-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#0D47A1"}),e.jsx("stop",{offset:"50%",stopColor:"#1976D2"}),e.jsx("stop",{offset:"100%",stopColor:"#0D47A1"})]}),e.jsxs("linearGradient",{id:`chiller-coil-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4FC3F7"}),e.jsx("stop",{offset:"50%",stopColor:"#81D4FA"}),e.jsx("stop",{offset:"100%",stopColor:"#4FC3F7"})]})]}),e.jsx("rect",{x:30,y:25,width:100,height:70,rx:5,fill:`url(#chiller-body-${o})`,stroke:"#0D47A1",strokeWidth:2}),e.jsx("path",{d:"M 45 40 L 55 55 L 65 40 L 75 55 L 85 40 L 95 55 L 105 40 L 115 55",fill:"none",stroke:`url(#chiller-coil-${o})`,strokeWidth:4,strokeLinecap:"round"}),e.jsx("path",{d:"M 45 65 L 55 80 L 65 65 L 75 80 L 85 65 L 95 80 L 105 65 L 115 80",fill:"none",stroke:`url(#chiller-coil-${o})`,strokeWidth:4,strokeLinecap:"round"}),e.jsx("rect",{x:5,y:55,width:25,height:10,fill:"#757575",stroke:"#424242",strokeWidth:1}),e.jsx("rect",{x:130,y:55,width:25,height:10,fill:"#757575",stroke:"#424242",strokeWidth:1}),e.jsx("circle",{cx:80,cy:15,r:8,fill:"#fff",stroke:"#0D47A1",strokeWidth:2}),e.jsx("text",{x:80,y:18,fontSize:8,fill:"#0D47A1",textAnchor:"middle",fontWeight:"bold",children:"C"}),e.jsx("text",{x:80,y:60,fontSize:16,fill:"#E3F2FD",textAnchor:"middle",children:"â„"}),e.jsx("text",{x:80,y:110,fontSize:11,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Chiller"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"leftType"),children:e.jsx(i.Handle,{id:`chiller-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:155,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"rightType"),children:e.jsx(i.Handle,{id:`chiller-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"chiller",label:"Chiller",labelTr:"Sogutucu",category:"heating_cooling",description:"Industrial water chiller unit",component:Qt,defaultSize:{width:Oe,height:Ge},equipmentTypeCodes:["chiller","water_chiller","cooler"]});const Le=220,ze=180,Jt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),[l,k]=a.useState((t==null?void 0:t.bottomType)||"source"),u=m=>m==="source"?"#22c55e":"#3b82f6",f=(m,b,v)=>j=>{if(n)return;j.preventDefault(),j.stopPropagation();const D=m==="source"?"target":"source";b(D),h(E=>E.map(C=>C.id===o?{...C,data:{...C.data,[v]:D}}:C))};a.useEffect(()=>{p(o)},[o,r,d,l,p]);const g=`cwt-${o.replace(/[^a-zA-Z0-9]/g,"")}`;return e.jsxs("div",{style:{width:Le,height:ze,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Le,height:ze,viewBox:"0 0 220 180",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`${g}-tankGradient`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#D4C896"}),e.jsx("stop",{offset:"50%",stopColor:"#FFFEF5"}),e.jsx("stop",{offset:"100%",stopColor:"#D4C896"})]}),e.jsxs("linearGradient",{id:`${g}-cleanWaterGradient`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#80DEEA",stopOpacity:.5}),e.jsx("stop",{offset:"50%",stopColor:"#4DD0E1",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#26C6DA",stopOpacity:.7})]}),e.jsxs("linearGradient",{id:`${g}-waterSurface`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:.4}),e.jsx("stop",{offset:"100%",stopColor:"#ffffff",stopOpacity:0})]}),e.jsxs("linearGradient",{id:`${g}-pipeGradient`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#C9BC85"}),e.jsx("stop",{offset:"50%",stopColor:"#EDE5C5"}),e.jsx("stop",{offset:"100%",stopColor:"#C9BC85"})]}),e.jsxs("linearGradient",{id:`${g}-flangeGradient`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#C9BC85"}),e.jsx("stop",{offset:"50%",stopColor:"#F0E8CC"}),e.jsx("stop",{offset:"100%",stopColor:"#C9BC85"})]}),e.jsxs("linearGradient",{id:`${g}-baseGradient`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#D4C896"}),e.jsx("stop",{offset:"100%",stopColor:"#B8A870"})]})]}),e.jsx("rect",{x:40,y:25,width:140,height:110,fill:`url(#${g}-tankGradient)`,stroke:"#B8A870",strokeWidth:2}),e.jsx("rect",{x:36,y:21,width:148,height:8,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#A89860",strokeWidth:1}),e.jsx("rect",{x:36,y:135,width:148,height:8,rx:1,fill:`url(#${g}-baseGradient)`,stroke:"#A89860",strokeWidth:1}),e.jsx("rect",{x:44,y:40,width:132,height:93,fill:`url(#${g}-cleanWaterGradient)`}),e.jsx("rect",{x:44,y:40,width:132,height:12,fill:`url(#${g}-waterSurface)`}),e.jsx("line",{x1:44,y1:40,x2:176,y2:40,stroke:"#80DEEA",strokeWidth:1.5}),e.jsx("path",{d:"M 50 42 Q 70 39, 90 42 Q 110 45, 130 42 Q 150 39, 170 42",stroke:"#B2EBF2",strokeWidth:1,fill:"none",opacity:.6}),e.jsx("rect",{x:5,y:50,width:39,height:10,fill:`url(#${g}-pipeGradient)`,stroke:"#A89860",strokeWidth:1}),e.jsx("rect",{x:3,y:48,width:5,height:14,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#A89860",strokeWidth:.5}),e.jsx("polygon",{points:"20,55 12,51 12,59",fill:"#0277BD"}),e.jsx("rect",{x:176,y:50,width:39,height:10,fill:`url(#${g}-pipeGradient)`,stroke:"#A89860",strokeWidth:1}),e.jsx("rect",{x:212,y:48,width:5,height:14,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#A89860",strokeWidth:.5}),e.jsx("polygon",{points:"198,55 206,51 206,59",fill:"#4DD0E1"}),e.jsx("rect",{x:105,y:140,width:10,height:25,fill:`url(#${g}-pipeGradient)`,stroke:"#A89860",strokeWidth:1}),e.jsx("rect",{x:102,y:138,width:16,height:5,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#A89860",strokeWidth:.5}),e.jsx("rect",{x:102,y:163,width:16,height:5,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#A89860",strokeWidth:.5}),e.jsx("text",{x:110,y:100,fontSize:12,fill:"#006064",textAnchor:"middle",children:(t==null?void 0:t.label)||"Clean Water"})]}),e.jsx("div",{style:{position:"absolute",left:3,top:55,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(r,c,"leftType"),children:e.jsx(i.Handle,{id:`cwt-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:u(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:217,top:55,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(d,x,"rightType"),children:e.jsx(i.Handle,{id:`cwt-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:110,top:168,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(l,k,"bottomType"),children:e.jsx(i.Handle,{id:`cwt-bottom-${l}`,type:l,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"cleanWaterTank",label:"Clean Water Tank",labelTr:"Temiz Su Tanki",category:"tank",description:"Clean water storage tank",component:Jt,defaultSize:{width:Le,height:ze},equipmentTypeCodes:["clean_water_tank","cwt","clean_tank"]});const Ue=30,Ye=30,Zt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.topType)||"target"),[d,x]=a.useState((t==null?void 0:t.bottomType)||"source"),[l,k]=a.useState((t==null?void 0:t.leftType)||"target"),[u,f]=a.useState((t==null?void 0:t.rightType)||"source"),g=v=>v==="source"?"target":"source",m=v=>{if(n)return;const j={top:r,bottom:d,left:l,right:u}[v],D=g(j);h(E=>E.map(C=>C.id===o?{...C,data:{...C.data,[`${v}Type`]:D}}:C)),v==="top"?c(D):v==="bottom"?x(D):v==="left"?k(D):v==="right"&&f(D)};a.useEffect(()=>{p(o)},[r,d,l,u,o,p]);const b=v=>v==="source"?"#22c55e":"#3b82f6";return e.jsxs("div",{style:{position:"relative",width:Ue,height:Ye,border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:"50%"},children:[e.jsx("svg",{width:Ue,height:Ye,children:e.jsx("circle",{cx:"15",cy:"15",r:"12",fill:(t==null?void 0:t.fillColor)||"#ffcc00",stroke:(t==null?void 0:t.strokeColor)||"#333",strokeWidth:"2"})}),e.jsx("div",{style:{position:"absolute",left:15,top:3,width:10,height:10,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:v=>{v.preventDefault(),v.stopPropagation(),m("top")},children:e.jsx(i.Handle,{id:`cp-top-${r}`,type:r,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:b(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:15,top:27,width:10,height:10,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:v=>{v.preventDefault(),v.stopPropagation(),m("bottom")},children:e.jsx(i.Handle,{id:`cp-bottom-${d}`,type:d,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:b(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:3,top:15,width:10,height:10,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:v=>{v.preventDefault(),v.stopPropagation(),m("left")},children:e.jsx(i.Handle,{id:`cp-left-${l}`,type:l,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:b(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:27,top:15,width:10,height:10,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:v=>{v.preventDefault(),v.stopPropagation(),m("right")},children:e.jsx(i.Handle,{id:`cp-right-${u}`,type:u,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:b(u),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"connectionPoint",label:"Connection Point",labelTr:"Baglanti Noktasi",category:"utility",description:"4-way junction for connecting pipes",component:Zt,defaultSize:{width:Ue,height:Ye},equipmentTypeCodes:["connection_point","cp","junction"]});const $e=100,Ve=160,Kt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.bottomType)||"source"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,bottomType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:$e,height:Ve,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:$e,height:Ve,viewBox:"0 0 100 160",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`demand-hopper-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FF8F00"}),e.jsx("stop",{offset:"50%",stopColor:"#FFA726"}),e.jsx("stop",{offset:"100%",stopColor:"#FF8F00"})]}),e.jsxs("linearGradient",{id:`demand-feed-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8D6E63"}),e.jsx("stop",{offset:"100%",stopColor:"#5D4037"})]})]}),e.jsx("path",{d:"M 20 10 L 80 10 L 60 70 L 40 70 Z",fill:`url(#demand-hopper-${o})`,stroke:"#E65100",strokeWidth:2}),e.jsx("path",{d:"M 28 25 L 72 25 L 57 65 L 43 65 Z",fill:`url(#demand-feed-${o})`}),e.jsx("rect",{x:35,y:70,width:30,height:8,rx:2,fill:"#546E7A",stroke:"#37474F",strokeWidth:1}),e.jsx("line",{x1:50,y1:78,x2:50,y2:130,stroke:"#455A64",strokeWidth:3}),e.jsx("circle",{cx:50,cy:135,r:10,fill:"#E65100",stroke:"#BF360C",strokeWidth:2}),e.jsx("circle",{cx:50,cy:135,r:4,fill:"#FF8F00"}),e.jsx("path",{d:"M 35 75 Q 30 80 35 85 Q 40 90 35 95",fill:"none",stroke:"#78909C",strokeWidth:2}),e.jsx("path",{d:"M 65 75 Q 70 80 65 85 Q 60 90 65 95",fill:"none",stroke:"#78909C",strokeWidth:2}),e.jsx("text",{x:50,y:155,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Demand Feeder"})]}),e.jsx("div",{style:{position:"absolute",left:50,top:135,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`demand-out-${r}`,type:r,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"demandFeeder",label:"Demand Feeder",labelTr:"Talep Yemlik",category:"feeding",description:"Demand-activated feeder with pendulum trigger",component:Kt,defaultSize:{width:$e,height:Ve},equipmentTypeCodes:["demand_feeder","pendulum_feeder"]});const Xe=180,Qe=120,qt=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.outputType)||"source"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,outputType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:Xe,height:Qe,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Xe,height:Qe,viewBox:"0 0 180 120",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`diesel-engine-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#37474F"}),e.jsx("stop",{offset:"50%",stopColor:"#546E7A"}),e.jsx("stop",{offset:"100%",stopColor:"#37474F"})]}),e.jsxs("linearGradient",{id:`diesel-alt-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#1565C0"}),e.jsx("stop",{offset:"50%",stopColor:"#1976D2"}),e.jsx("stop",{offset:"100%",stopColor:"#1565C0"})]})]}),e.jsx("rect",{x:10,y:85,width:160,height:15,rx:3,fill:"#263238",stroke:"#1B1B1B",strokeWidth:1}),e.jsx("rect",{x:15,y:35,width:80,height:50,rx:3,fill:`url(#diesel-engine-${o})`,stroke:"#263238",strokeWidth:2}),[0,1,2,3,4].map(l=>e.jsx("rect",{x:20+l*15,y:40,width:10,height:40,fill:"#455A64",stroke:"#37474F",strokeWidth:.5},l)),e.jsx("rect",{x:30,y:15,width:15,height:20,rx:2,fill:"#424242",stroke:"#212121",strokeWidth:1}),e.jsx("circle",{cx:37,cy:10,r:5,fill:"#757575",opacity:.5}),e.jsx("circle",{cx:40,cy:5,r:3,fill:"#9E9E9E",opacity:.4}),e.jsx("rect",{x:100,y:40,width:60,height:45,rx:5,fill:`url(#diesel-alt-${o})`,stroke:"#0D47A1",strokeWidth:2}),e.jsx("circle",{cx:130,cy:62,r:15,fill:"#1E88E5",stroke:"#1565C0",strokeWidth:1}),e.jsx("circle",{cx:130,cy:62,r:8,fill:"#0D47A1"}),e.jsx("text",{x:130,y:66,fontSize:10,fill:"#fff",textAnchor:"middle",children:"âš¡"}),e.jsx("rect",{x:95,y:50,width:10,height:25,fill:"#78909C"}),e.jsx("rect",{x:15,y:20,width:15,height:15,rx:2,fill:"#FF9800",stroke:"#F57C00",strokeWidth:1}),e.jsx("text",{x:22,y:32,fontSize:8,fill:"#fff",textAnchor:"middle",children:"F"}),e.jsx("path",{d:"M 165 62 L 175 62",stroke:"#FFC107",strokeWidth:4,fill:"none"}),e.jsx("text",{x:90,y:110,fontSize:10,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Diesel Generator"})]}),e.jsx("div",{style:{position:"absolute",left:175,top:62,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`diesel-out-${r}`,type:r,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"dieselGenerator",label:"Diesel Generator",labelTr:"Dizel Jenerator",category:"power",description:"Diesel backup generator",component:qt,defaultSize:{width:Xe,height:Qe},equipmentTypeCodes:["diesel_generator","generator","backup_power"]});const Je=220,Ze=180,eo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),[l,k]=a.useState((t==null?void 0:t.bottomType)||"source"),u=m=>m==="source"?"#22c55e":"#3b82f6",f=(m,b,v)=>j=>{if(n)return;j.preventDefault(),j.stopPropagation();const D=m==="source"?"target":"source";b(D),h(E=>E.map(C=>C.id===o?{...C,data:{...C.data,[v]:D}}:C))};a.useEffect(()=>{p(o)},[o,r,d,l,p]);const g=`dwt-${o.replace(/[^a-zA-Z0-9]/g,"")}`;return e.jsxs("div",{style:{width:Je,height:Ze,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Je,height:Ze,viewBox:"0 0 220 180",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`${g}-tankGradient`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8D8D8D"}),e.jsx("stop",{offset:"50%",stopColor:"#B0B0B0"}),e.jsx("stop",{offset:"100%",stopColor:"#8D8D8D"})]}),e.jsxs("linearGradient",{id:`${g}-dirtyWaterGradient`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8B7355",stopOpacity:.6}),e.jsx("stop",{offset:"50%",stopColor:"#6B5344",stopOpacity:.7}),e.jsx("stop",{offset:"100%",stopColor:"#5D4037",stopOpacity:.8})]}),e.jsxs("linearGradient",{id:`${g}-pipeGradient`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#757575"}),e.jsx("stop",{offset:"50%",stopColor:"#9E9E9E"}),e.jsx("stop",{offset:"100%",stopColor:"#757575"})]}),e.jsxs("linearGradient",{id:`${g}-flangeGradient`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9E9E9E"}),e.jsx("stop",{offset:"50%",stopColor:"#BDBDBD"}),e.jsx("stop",{offset:"100%",stopColor:"#9E9E9E"})]})]}),e.jsx("rect",{x:40,y:25,width:140,height:110,fill:`url(#${g}-tankGradient)`,stroke:"#616161",strokeWidth:2}),e.jsx("rect",{x:36,y:21,width:148,height:8,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:1}),e.jsx("rect",{x:36,y:135,width:148,height:8,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:1}),e.jsx("rect",{x:44,y:45,width:132,height:88,fill:`url(#${g}-dirtyWaterGradient)`}),e.jsx("ellipse",{cx:80,cy:80,rx:8,ry:4,fill:"#5D4037",opacity:.4}),e.jsx("ellipse",{cx:140,cy:95,rx:6,ry:3,fill:"#5D4037",opacity:.3}),e.jsx("ellipse",{cx:100,cy:110,rx:10,ry:5,fill:"#4E342E",opacity:.3}),e.jsx("rect",{x:5,y:50,width:39,height:10,fill:`url(#${g}-pipeGradient)`,stroke:"#616161",strokeWidth:1}),e.jsx("rect",{x:3,y:48,width:5,height:14,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:.5}),e.jsx("polygon",{points:"20,55 12,51 12,59",fill:"#795548"}),e.jsx("rect",{x:176,y:50,width:39,height:10,fill:`url(#${g}-pipeGradient)`,stroke:"#616161",strokeWidth:1}),e.jsx("rect",{x:212,y:48,width:5,height:14,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:.5}),e.jsx("polygon",{points:"198,55 206,51 206,59",fill:"#8D6E63"}),e.jsx("rect",{x:105,y:140,width:10,height:25,fill:`url(#${g}-pipeGradient)`,stroke:"#616161",strokeWidth:1}),e.jsx("rect",{x:102,y:138,width:16,height:5,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:.5}),e.jsx("rect",{x:102,y:163,width:16,height:5,rx:1,fill:`url(#${g}-flangeGradient)`,stroke:"#757575",strokeWidth:.5}),e.jsx("text",{x:110,y:35,fontSize:11,fill:"#5D4037",textAnchor:"middle",fontWeight:"bold",children:(t==null?void 0:t.label)||"Dirty Water"})]}),e.jsx("div",{style:{position:"absolute",left:3,top:55,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(r,c,"leftType"),children:e.jsx(i.Handle,{id:`dwt-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:u(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:217,top:55,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(d,x,"rightType"),children:e.jsx(i.Handle,{id:`dwt-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:110,top:168,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(l,k,"bottomType"),children:e.jsx(i.Handle,{id:`dwt-bottom-${l}`,type:l,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"dirtyWaterTank",label:"Dirty Water Tank",labelTr:"Kirli Su Tanki",category:"tank",description:"Dirty/waste water collection tank",component:eo,defaultSize:{width:Je,height:Ze},equipmentTypeCodes:["dirty_water_tank","dwt","waste_tank"]});const Ke=120,qe=160,to=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.inletType)||"target"),[d,x]=a.useState((t==null?void 0:t.outletType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:Ke,height:qe,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Ke,height:qe,viewBox:"0 0 120 160",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`dosing-tank-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#E8EAF6"}),e.jsx("stop",{offset:"50%",stopColor:"#FFFFFF"}),e.jsx("stop",{offset:"100%",stopColor:"#E8EAF6"})]}),e.jsxs("linearGradient",{id:`dosing-liquid-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#7C4DFF",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#651FFF",stopOpacity:.8})]}),e.jsxs("linearGradient",{id:`dosing-pump-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#455A64"})]})]}),e.jsx("rect",{x:30,y:10,width:60,height:80,rx:3,fill:`url(#dosing-tank-${o})`,stroke:"#9E9E9E",strokeWidth:2}),e.jsx("rect",{x:34,y:35,width:52,height:52,fill:`url(#dosing-liquid-${o})`}),e.jsx("line",{x1:32,y1:30,x2:38,y2:30,stroke:"#9E9E9E",strokeWidth:1}),e.jsx("line",{x1:32,y1:50,x2:38,y2:50,stroke:"#9E9E9E",strokeWidth:1}),e.jsx("line",{x1:32,y1:70,x2:38,y2:70,stroke:"#9E9E9E",strokeWidth:1}),e.jsx("rect",{x:35,y:100,width:50,height:35,rx:3,fill:`url(#dosing-pump-${o})`,stroke:"#37474F",strokeWidth:2}),e.jsx("circle",{cx:60,cy:117,r:12,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("circle",{cx:60,cy:117,r:5,fill:"#455A64"}),e.jsx("path",{d:"M 60 90 L 60 100",stroke:"#7C4DFF",strokeWidth:4,fill:"none"}),e.jsx("path",{d:"M 85 117 L 115 117",stroke:"#7C4DFF",strokeWidth:4,fill:"none"}),e.jsx("text",{x:60,y:150,fontSize:10,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Dosing Pump"})]}),e.jsx("div",{style:{position:"absolute",left:60,top:10,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"inletType"),children:e.jsx(i.Handle,{id:`dosing-inlet-${r}`,type:r,position:i.Position.Top,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:115,top:117,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"outletType"),children:e.jsx(i.Handle,{id:`dosing-outlet-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"dosingPump",label:"Dosing Pump",labelTr:"Dozaj Pompasi",category:"pump",description:"Chemical dosing pump with tank",component:to,defaultSize:{width:Ke,height:qe},equipmentTypeCodes:["dosing_pump","chemical_pump","metering_pump"]});const oo=455,so=176,io=({id:o,data:t,selected:y})=>{const[p,h]=a.useState((t==null?void 0:t.inletType1)||"target"),[n,r]=a.useState((t==null?void 0:t.inletType2)||"target"),[c,d]=a.useState((t==null?void 0:t.inletType3)||"target"),[x,l]=a.useState((t==null?void 0:t.drainType)||"source"),[k,u]=a.useState((t==null?void 0:t.outlet)||"source"),f=(t==null?void 0:t.isScadaMode)||!1,g=i.useUpdateNodeInternals(),{setNodes:m}=i.useReactFlow(),b=(D,E,C)=>P=>{if(f)return;P.preventDefault(),P.stopPropagation();const L=D==="source"?"target":"source";E(L),m(z=>z.map(Y=>Y.id===o?{...Y,data:{...Y.data,[C]:L}}:Y))};a.useEffect(()=>{g(o)},[o,p,n,c,x,k,g]);const v=.56,j=D=>D==="source"?"#22c55e":"#3b82f6";return e.jsxs("div",{style:{width:oo,height:so,position:"relative",pointerEvents:"none",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsx("div",{style:{transform:`scale(${v})`,transformOrigin:"top left"},children:e.jsxs("svg",{width:"812",height:"315",viewBox:"60 105 812 315",xmlns:"http://www.w3.org/2000/svg",style:{pointerEvents:"auto"},children:[e.jsx("rect",{width:"100%",height:"100%",fill:"transparent"}),e.jsx("rect",{x:"90",y:"230",width:"70",height:"40",fill:"#9e9e9e",stroke:"#333",strokeWidth:"2"}),e.jsx("text",{x:"95",y:"225",fontSize:"13",fill:"#333",children:"Giris"}),e.jsx("rect",{x:"100",y:"180",width:"120",height:"15",fill:"#7b5e57",stroke:"#000",strokeWidth:"1.5"}),e.jsx("text",{x:"105",y:"175",fontSize:"12",fill:"#000",children:"Drenaj"}),e.jsx("rect",{x:"160",y:"150",width:"612",height:"200",rx:"20",ry:"20",fill:"#e0e0e0",stroke:"#333",strokeWidth:"2"}),e.jsx("text",{x:"350",y:"260",fontSize:"16",fill:"#000",children:(t==null?void 0:t.label)||"Drum Filter"}),e.jsx("defs",{children:e.jsx("pattern",{id:"mesh",patternUnits:"userSpaceOnUse",width:"20",height:"20",children:e.jsx("path",{d:"M0,0 L20,20 M20,0 L0,20",stroke:"#888",strokeWidth:"2"})})}),e.jsx("rect",{x:"180",y:"170",width:"572",height:"160",fill:"url(#mesh)",opacity:"0.6"}),e.jsx("rect",{x:"200",y:"120",width:"540",height:"30",rx:"10",fill:"#cfd8dc",stroke:"#444",strokeWidth:"2"}),e.jsx("g",{fill:"#000",children:[180,220,260,300,340,380,420,460,500,540,580,620,660,700].map(D=>e.jsx("circle",{cx:D,cy:"160",r:"3"},D))}),e.jsx("rect",{x:"772",y:"230",width:"70",height:"40",fill:"#9e9e9e",stroke:"#333",strokeWidth:"2"}),e.jsx("text",{x:"777",y:"225",fontSize:"13",fill:"#333",children:"Cikis"}),e.jsxs("g",{children:[e.jsx("rect",{x:"752",y:"160",width:"40",height:"60",fill:"#757575",stroke:"#222",strokeWidth:"1.5",rx:"5"}),e.jsx("circle",{cx:"772",cy:"190",r:"10",fill:"#212121"}),e.jsx("text",{x:"768",y:"194",fontSize:"8",fill:"#fff",children:"M"})]})]})}),e.jsx("div",{style:{position:"absolute",left:17,top:70,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b(p,h,"inletType1"),children:e.jsx(i.Handle,{id:`inlet-1-${p}`,type:p,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:j(p),borderRadius:"50%",border:"2px solid white",cursor:f?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:17,top:84,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b(n,r,"inletType2"),children:e.jsx(i.Handle,{id:`inlet-2-${n}`,type:n,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:j(n),borderRadius:"50%",border:"2px solid white",cursor:f?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:17,top:98,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b(c,d,"inletType3"),children:e.jsx(i.Handle,{id:`inlet-3-${c}`,type:c,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:j(c),borderRadius:"50%",border:"2px solid white",cursor:f?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:22,top:46,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b(x,l,"drainType"),children:e.jsx(i.Handle,{id:`drain-${x}`,type:x,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:j(x),borderRadius:"50%",border:"2px solid white",cursor:f?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:438,top:81,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:b(k,u,"outlet"),children:e.jsx(i.Handle,{id:`outlet-${k}`,type:k,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:j(k),borderRadius:"50%",border:"2px solid white",cursor:f?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"drumFilter",label:"Drum Filter",labelTr:"Tambur Filtre",category:"filtration",description:"Faivre 200 Drum Filter with multiple inlets",component:io,defaultSize:{width:oo,height:so},equipmentTypeCodes:["drum_filter","filter_drum","drum-filter"]});const et=180,tt=160,ro=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.inletType)||"target"),[d,x]=a.useState((t==null?void 0:t.centerDrainType)||"source"),[l,k]=a.useState((t==null?void 0:t.sideDrainType)||"source"),u=g=>g==="source"?"#22c55e":"#3b82f6",f=(g,m,b)=>v=>{if(n)return;v.preventDefault(),v.stopPropagation();const j=g==="source"?"target":"source";m(j),h(D=>D.map(E=>E.id===o?{...E,data:{...E.data,[b]:j}}:E))};return a.useEffect(()=>{p(o)},[o,r,d,l,p]),e.jsxs("div",{style:{width:et,height:tt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:et,height:tt,viewBox:"0 0 180 160",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`dual-tank-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#546E7A"}),e.jsx("stop",{offset:"50%",stopColor:"#78909C"}),e.jsx("stop",{offset:"100%",stopColor:"#546E7A"})]}),e.jsxs("linearGradient",{id:`dual-water-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4FC3F7",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#0288D1",stopOpacity:.8})]})]}),e.jsx("ellipse",{cx:90,cy:70,rx:75,ry:50,fill:`url(#dual-tank-${o})`,stroke:"#455A64",strokeWidth:3}),e.jsx("ellipse",{cx:90,cy:70,rx:70,ry:45,fill:`url(#dual-water-${o})`}),e.jsx("circle",{cx:90,cy:70,r:15,fill:"#263238",stroke:"#1B1B1B",strokeWidth:2}),e.jsx("circle",{cx:90,cy:70,r:8,fill:"#37474F"}),e.jsx("rect",{x:83,y:130,width:14,height:25,fill:"#455A64",stroke:"#37474F",strokeWidth:1}),e.jsx("text",{x:90,y:148,fontSize:7,fill:"#fff",textAnchor:"middle",children:"C"}),e.jsx("rect",{x:155,y:60,width:20,height:20,rx:3,fill:"#455A64",stroke:"#37474F",strokeWidth:1}),e.jsx("circle",{cx:165,cy:70,r:6,fill:"#263238"}),e.jsx("text",{x:165,y:73,fontSize:7,fill:"#fff",textAnchor:"middle",children:"S"}),e.jsx("rect",{x:5,y:40,width:25,height:12,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("path",{d:"M 30 46 L 45 55",stroke:"#42A5F5",strokeWidth:4}),e.jsx("path",{d:"M 50 55 Q 70 45 90 55",stroke:"#B3E5FC",strokeWidth:2,strokeDasharray:"4,2",fill:"none"}),e.jsx("ellipse",{cx:70,cy:75,rx:8,ry:4,fill:"#90A4AE",opacity:.5}),e.jsx("ellipse",{cx:110,cy:65,rx:6,ry:3,fill:"#90A4AE",opacity:.4}),e.jsx("ellipse",{cx:95,cy:85,rx:7,ry:3,fill:"#90A4AE",opacity:.5}),e.jsx("text",{x:90,y:15,fontSize:10,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Dual Drain Tank"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:46,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(r,c,"inletType"),children:e.jsx(i.Handle,{id:`dual-inlet-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:u(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:90,top:155,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(d,x,"centerDrainType"),children:e.jsx(i.Handle,{id:`dual-center-${d}`,type:d,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:175,top:70,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(l,k,"sideDrainType"),children:e.jsx(i.Handle,{id:`dual-side-${l}`,type:l,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"dualDrainTank",label:"Dual Drain Tank",labelTr:"Cift Tahliyeli Tank",category:"tank",description:"Fish tank with center and side drains",component:ro,defaultSize:{width:et,height:tt},equipmentTypeCodes:["dual_drain_tank","cornell_tank","swirl_separator_tank"]});const ee={SMALL:{width:120,height:100},MEDIUM:{width:140,height:120},MEDIUM_LARGE:{width:160,height:140},LARGE:{width:180,height:160},EXTRA_LARGE:{width:200,height:180},WIDE:{width:200,height:140}},oe=[{id:"top",position:"top",defaultType:"input"},{id:"right",position:"right",defaultType:"output"},{id:"bottom",position:"bottom",defaultType:"output"},{id:"left",position:"left",defaultType:"input"}],we={tank:{code:"tank",name:"Tank",nameTr:"Tank",category:"tank",defaultSize:ee.EXTRA_LARGE,connectionPoints:oe},pump:{code:"pump",name:"Pump",nameTr:"Pompa",category:"pump",defaultSize:ee.MEDIUM,connectionPoints:oe},chiller:{code:"chiller",name:"Chiller",nameTr:"Sogutucu",category:"heating_cooling",defaultSize:ee.MEDIUM_LARGE,connectionPoints:oe},heater:{code:"heater",name:"Heater",nameTr:"Isitici",category:"heating_cooling",defaultSize:ee.MEDIUM_LARGE,connectionPoints:oe},"root-blower":{code:"root-blower",name:"Root Blower",nameTr:"Root Blower",category:"aeration",defaultSize:{width:150,height:130},connectionPoints:oe},fan:{code:"fan",name:"Fan",nameTr:"Fan",category:"aeration",defaultSize:ee.SMALL,connectionPoints:oe},feeder:{code:"feeder",name:"Feeder",nameTr:"Yemleme",category:"feeding",defaultSize:ee.MEDIUM,connectionPoints:oe},"drum-filter":{code:"drum-filter",name:"Drum Filter",nameTr:"Drum Filtre",category:"filtration",defaultSize:ee.LARGE,connectionPoints:oe},"sand-filter":{code:"sand-filter",name:"Sand Filter",nameTr:"Kum Filtre",category:"filtration",defaultSize:ee.LARGE,connectionPoints:oe},"electric-generator":{code:"electric-generator",name:"Electric Generator",nameTr:"Elektrik Jeneratoru",category:"power",defaultSize:ee.MEDIUM_LARGE,connectionPoints:oe},"oxygen-generator":{code:"oxygen-generator",name:"Oxygen Generator",nameTr:"Oksijen Jeneratoru",category:"aeration",defaultSize:ee.MEDIUM_LARGE,connectionPoints:oe},"belt-filter":{code:"belt-filter",name:"Belt Filter",nameTr:"Bant Filtre",category:"filtration",defaultSize:ee.WIDE,connectionPoints:oe}},no=o=>{const t=o.toLowerCase().replace(/_/g,"-");return we[t]},lo=o=>{const t=no(o);return(t==null?void 0:t.defaultSize)??ee.MEDIUM},as=()=>Object.values(we),fs=o=>Object.values(we).filter(t=>t.category===o),us={tank:{name:"Tank",nameTr:"Tank",order:1},pump:{name:"Pump",nameTr:"Pompa",order:2},filtration:{name:"Filtration",nameTr:"Filtrasyon",order:3},aeration:{name:"Aeration",nameTr:"Havalandirma",order:4},heating_cooling:{name:"Heating/Cooling",nameTr:"Isitma/Sogutma",order:5},feeding:{name:"Feeding",nameTr:"Yemleme",order:6},power:{name:"Power",nameTr:"Guc",order:7}},co={operational:{bg:"#f0fdf4",border:"#4ade80",text:"#15803d",dot:"#22c55e"},active:{bg:"#f0fdf4",border:"#4ade80",text:"#15803d",dot:"#22c55e"},maintenance:{bg:"#fefce8",border:"#facc15",text:"#a16207",dot:"#eab308"},repair:{bg:"#fff7ed",border:"#fb923c",text:"#c2410c",dot:"#f97316"},out_of_service:{bg:"#fef2f2",border:"#f87171",text:"#b91c1c",dot:"#ef4444"},decommissioned:{bg:"#f9fafb",border:"#9ca3af",text:"#6b7280",dot:"#9ca3af"},standby:{bg:"#eff6ff",border:"#60a5fa",text:"#1d4ed8",dot:"#3b82f6"},preparing:{bg:"#faf5ff",border:"#c084fc",text:"#7c3aed",dot:"#a855f7"},cleaning:{bg:"#ecfeff",border:"#22d3ee",text:"#0e7490",dot:"#06b6d4"},harvesting:{bg:"#fffbeb",border:"#fbbf24",text:"#b45309",dot:"#f59e0b"},fallow:{bg:"#f5f5f4",border:"#a8a29e",text:"#57534e",dot:"#78716c"},quarantine:{bg:"#fff1f2",border:"#fb7185",text:"#be123c",dot:"#f43f5e"}},xs=o=>co[o==null?void 0:o.toLowerCase()]||co.standby,Ee=o=>({background:o==="input"?"#3b82f6":"#22c55e",border:"2px solid white"}),po={tank:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"4",y:"6",width:"16",height:"14",rx:"2",stroke:t,strokeWidth:"2"}),e.jsx("ellipse",{cx:"12",cy:"6",rx:"8",ry:"2",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M8 14h8",stroke:t,strokeWidth:"1.5",strokeLinecap:"round"})]}),pump:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"6",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M12 6v12M6 12h12",stroke:t,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M3 12h3M18 12h3",stroke:t,strokeWidth:"2",strokeLinecap:"round"})]}),chiller:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M8 12l2-3 2 3 2-3 2 3",stroke:t,strokeWidth:"1.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"6",cy:"16",r:"1",fill:t}),e.jsx("circle",{cx:"18",cy:"16",r:"1",fill:t})]}),heater:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"4",y:"6",width:"16",height:"12",rx:"2",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M8 10v4M12 9v6M16 10v4",stroke:t,strokeWidth:"2",strokeLinecap:"round"})]}),"root-blower":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("ellipse",{cx:"12",cy:"12",rx:"8",ry:"6",stroke:t,strokeWidth:"2"}),e.jsx("ellipse",{cx:"8",cy:"12",rx:"2",ry:"3",stroke:t,strokeWidth:"1.5"}),e.jsx("ellipse",{cx:"16",cy:"12",rx:"2",ry:"3",stroke:t,strokeWidth:"1.5"}),e.jsx("path",{d:"M4 12h2M18 12h2",stroke:t,strokeWidth:"2",strokeLinecap:"round"})]}),fan:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"3",fill:t}),e.jsx("path",{d:"M12 3c0 5-3 6-3 9s3 4 3 9c0-5 3-6 3-9s-3-4-3-9z",stroke:t,strokeWidth:"1.5"}),e.jsx("path",{d:"M3 12c5 0 6-3 9-3s4 3 9 3c-5 0-6 3-9 3s-4-3-9-3z",stroke:t,strokeWidth:"1.5"})]}),feeder:({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M6 8h12l-2 10H8L6 8z",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M4 8h16",stroke:t,strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M10 12l2 3 2-3",stroke:t,strokeWidth:"1.5"})]}),"drum-filter":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"4",y:"7",width:"16",height:"10",rx:"5",stroke:t,strokeWidth:"2"}),e.jsx("ellipse",{cx:"4",cy:"12",rx:"1",ry:"5",stroke:t,strokeWidth:"1.5"}),e.jsx("ellipse",{cx:"20",cy:"12",rx:"1",ry:"5",stroke:t,strokeWidth:"1.5"}),e.jsx("path",{d:"M8 9v6M12 8v8M16 9v6",stroke:t,strokeWidth:"1",opacity:"0.5"})]}),"sand-filter":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M6 4h12l-2 16H8L6 4z",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M7 10h10",stroke:t,strokeWidth:"1.5",strokeDasharray:"2 1"}),e.jsx("circle",{cx:"9",cy:"14",r:"1",fill:t,opacity:"0.5"}),e.jsx("circle",{cx:"12",cy:"15",r:"1",fill:t,opacity:"0.5"}),e.jsx("circle",{cx:"15",cy:"14",r:"1",fill:t,opacity:"0.5"})]}),"belt-filter":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"3",y:"8",width:"18",height:"8",stroke:t,strokeWidth:"2"}),e.jsx("circle",{cx:"6",cy:"12",r:"2",stroke:t,strokeWidth:"1.5"}),e.jsx("circle",{cx:"18",cy:"12",r:"2",stroke:t,strokeWidth:"1.5"}),e.jsx("path",{d:"M8 12h8",stroke:t,strokeWidth:"2",strokeDasharray:"3 2"})]}),"electric-generator":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("rect",{x:"4",y:"6",width:"16",height:"12",rx:"2",stroke:t,strokeWidth:"2"}),e.jsx("path",{d:"M13 9l-3 3h4l-3 3",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"oxygen-generator":({size:o,color:t})=>e.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"7",stroke:t,strokeWidth:"2"}),e.jsx("text",{x:"12",y:"16",textAnchor:"middle",fontSize:"10",fill:t,fontWeight:"bold",children:"Oâ‚‚"})]})},ys=o=>po[o]||po.tank,ot=a.memo(({id:o,data:t,selected:y})=>{var f,g,m,b;const p=ys(t.equipmentType),h=xs(t.status||"standby"),n=lo(t.equipmentType),r=(t==null?void 0:t.isScadaMode)||!1,{setNodes:c}=i.useReactFlow(),d=i.useUpdateNodeInternals(),[x,l]=a.useState({top:((f=t.connectionPoints)==null?void 0:f.top)||"input",right:((g=t.connectionPoints)==null?void 0:g.right)||"output",bottom:((m=t.connectionPoints)==null?void 0:m.bottom)||"output",left:((b=t.connectionPoints)==null?void 0:b.left)||"input"});a.useEffect(()=>{t.connectionPoints&&l({top:t.connectionPoints.top||"input",right:t.connectionPoints.right||"output",bottom:t.connectionPoints.bottom||"output",left:t.connectionPoints.left||"input"})},[t.connectionPoints]),a.useEffect(()=>{d(o)},[o,x,d]);const k=a.useCallback((v,j)=>{if(r)return;v.preventDefault(),v.stopPropagation();const E=x[j]==="input"?"output":"input",C={...x,[j]:E};l(C),c(P=>P.map(L=>L.id===o?{...L,data:{...L.data,connectionPoints:C}}:L))},[o,x,c,r]),u=Math.min(n.width,n.height)*.35;return e.jsxs("div",{style:{width:n.width,height:n.height,position:"relative",backgroundColor:h.bg,border:`2px solid ${y?"#3b82f6":h.border}`,borderRadius:8,boxShadow:y?"0 0 0 2px rgba(59, 130, 246, 0.3)":"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease",transform:y?"scale(1.02)":"scale(1)"},children:[e.jsx("div",{style:{position:"absolute",left:"50%",top:-8,transform:"translateX(-50%)",width:16,height:16,zIndex:10,pointerEvents:"all"},onContextMenu:v=>k(v,"top"),children:e.jsx(i.Handle,{type:x.top==="input"?"target":"source",position:i.Position.Top,id:"top",style:{...Ee(x.top),width:"100%",height:"100%",borderRadius:"50%",cursor:r?"default":"pointer",position:"relative",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",right:-8,top:"50%",transform:"translateY(-50%)",width:16,height:16,zIndex:10,pointerEvents:"all"},onContextMenu:v=>k(v,"right"),children:e.jsx(i.Handle,{type:x.right==="input"?"target":"source",position:i.Position.Right,id:"right",style:{...Ee(x.right),width:"100%",height:"100%",borderRadius:"50%",cursor:r?"default":"pointer",position:"relative",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:"50%",bottom:-8,transform:"translateX(-50%)",width:16,height:16,zIndex:10,pointerEvents:"all"},onContextMenu:v=>k(v,"bottom"),children:e.jsx(i.Handle,{type:x.bottom==="input"?"target":"source",position:i.Position.Bottom,id:"bottom",style:{...Ee(x.bottom),width:"100%",height:"100%",borderRadius:"50%",cursor:r?"default":"pointer",position:"relative",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:-8,top:"50%",transform:"translateY(-50%)",width:16,height:16,zIndex:10,pointerEvents:"all"},onContextMenu:v=>k(v,"left"),children:e.jsx(i.Handle,{type:x.left==="input"?"target":"source",position:i.Position.Left,id:"left",style:{...Ee(x.left),width:"100%",height:"100%",borderRadius:"50%",cursor:r?"default":"pointer",position:"relative",transform:"none",left:0,top:0}})}),e.jsxs("div",{style:{padding:12,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(p,{size:u,color:h.text})}),e.jsxs("div",{style:{marginTop:8,textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:500,fontSize:13,color:"#111827",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.equipmentName,children:t.equipmentName||t.equipmentType}),t.equipmentCode&&e.jsx("div",{style:{fontSize:11,color:"#6b7280",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.equipmentCode,children:t.equipmentCode})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:8},children:e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",padding:"2px 8px",borderRadius:12,fontSize:11,fontWeight:500,backgroundColor:h.bg,color:h.text,border:`1px solid ${h.border}`},children:[e.jsx("span",{style:{width:6,height:6,borderRadius:"50%",marginRight:6,backgroundColor:h.dot,animation:t.status==="operational"||t.status==="active"?"pulse 2s infinite":"none"}}),(t.status||"standby").charAt(0).toUpperCase()+(t.status||"standby").slice(1).replace("_"," ")]})})]}),e.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})});ot.displayName="EquipmentNode",H.register({id:"equipment",label:"Equipment",labelTr:"Ekipman",category:"equipment",description:"Generic equipment node with multiple types",component:ot,defaultSize:{width:140,height:120},equipmentTypeCodes:["equipment","generic"]});const ho=300,gs=100,ao=({id:o,data:t,selected:y})=>{const p=(t==null?void 0:t.label)||"Fish Tank (RAS)",h=(t==null?void 0:t.width)||ho,n=(t==null?void 0:t.height)||h/3,r=(t==null?void 0:t.pipeHeight)||20,c=11,d=13,x=n+r,l=(t==null?void 0:t.isScadaMode)||!1,k=i.useUpdateNodeInternals(),{setNodes:u}=i.useReactFlow(),[f,g]=a.useState((t==null?void 0:t.inletType)||"target"),[m,b]=a.useState((t==null?void 0:t.outletType)||"source"),[v,j]=a.useState((t==null?void 0:t.pipeLeftType)||"source"),[D,E]=a.useState((t==null?void 0:t.pipeRightType)||"source"),C=L=>L==="source"?"#22c55e":"#3b82f6",P=(L,z,Y)=>O=>{if(l)return;O.preventDefault(),O.stopPropagation();const R=L==="source"?"target":"source";z(R),u(w=>w.map(F=>F.id===o?{...F,data:{...F.data,[Y]:R}}:F))};return a.useEffect(()=>{k(o)},[o,f,m,v,D,k]),e.jsxs("div",{style:{position:"relative",width:h,height:x,border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:h,height:x,viewBox:`0 0 ${h} ${x}`,xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:0,y:0,width:h,height:n,rx:15,ry:15,fill:"none",stroke:(t==null?void 0:t.tankStroke)||"#005678",strokeWidth:3}),e.jsx("rect",{x:0,y:n*.4,width:h,height:n*.6,fill:(t==null?void 0:t.waterColor)||"#4FB3F6",opacity:.6}),e.jsx("ellipse",{cx:h/2,cy:n/2,rx:h*.05,ry:n*.07,fill:"#FFA07A",stroke:"#CD5C5C",strokeWidth:2}),e.jsx("polygon",{points:`${h/2+h*.05},${n/2} ${h/2+h*.1},${n/2-n*.05} ${h/2+h*.1},${n/2+n*.05}`,fill:"#CD5C5C"}),e.jsx("rect",{x:h*.5-c-d/2,y:n,width:c,height:r,fill:(t==null?void 0:t.pipeColor)||"#555",rx:r/2}),e.jsx("rect",{x:h*.5+d/2,y:n,width:c,height:r,fill:(t==null?void 0:t.pipeColor)||"#555",rx:r/2}),e.jsx("text",{x:10,y:20,fontSize:16,fill:"#003366",children:p})]}),e.jsx("div",{style:{position:"absolute",left:0,top:n*.5,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:P(f,g,"inletType"),children:e.jsx(i.Handle,{id:`tank-inlet-${f}`,type:f,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:C(f),borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:h,top:n*.5,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:P(m,b,"outletType"),children:e.jsx(i.Handle,{id:`tank-outlet-${m}`,type:m,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:C(m),borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:h*.5-c-d/2+5,top:n+r,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:P(v,j,"pipeLeftType"),children:e.jsx(i.Handle,{id:`source-pipe-left-${v}`,type:v,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:C(v),borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:h*.5+d/2+5,top:n+r,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:P(D,E,"pipeRightType"),children:e.jsx(i.Handle,{id:`source-pipe-right-${D}`,type:D,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:C(D),borderRadius:"50%",border:"2px solid white",cursor:l?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"fishTank",label:"Fish Tank (RAS)",labelTr:"Balik Tanki (RAS)",category:"tank",description:"Recirculating aquaculture system fish tank",component:ao,defaultSize:{width:ho,height:gs+20},equipmentTypeCodes:["fish_tank","ras_tank","fishtank"]});const st=180,it=120,fo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.inputType)||"target"),[d,x]=a.useState((t==null?void 0:t.outputType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:st,height:it,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:st,height:it,viewBox:"0 0 180 120",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`gas-body-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00695C"}),e.jsx("stop",{offset:"50%",stopColor:"#00897B"}),e.jsx("stop",{offset:"100%",stopColor:"#00695C"})]}),e.jsxs("linearGradient",{id:`gas-turbine-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#78909C"}),e.jsx("stop",{offset:"50%",stopColor:"#90A4AE"}),e.jsx("stop",{offset:"100%",stopColor:"#78909C"})]})]}),e.jsx("rect",{x:10,y:85,width:160,height:15,rx:3,fill:"#263238",stroke:"#1B1B1B",strokeWidth:1}),e.jsx("rect",{x:20,y:30,width:140,height:55,rx:5,fill:`url(#gas-body-${o})`,stroke:"#004D40",strokeWidth:2}),e.jsx("rect",{x:30,y:40,width:50,height:35,rx:3,fill:`url(#gas-turbine-${o})`,stroke:"#546E7A",strokeWidth:1}),e.jsx("circle",{cx:55,cy:57,r:12,fill:"#607D8B",stroke:"#455A64",strokeWidth:1}),e.jsx("line",{x1:55,y1:45,x2:55,y2:69,stroke:"#455A64",strokeWidth:2}),e.jsx("line",{x1:43,y1:57,x2:67,y2:57,stroke:"#455A64",strokeWidth:2}),e.jsx("line",{x1:47,y1:49,x2:63,y2:65,stroke:"#455A64",strokeWidth:2}),e.jsx("line",{x1:47,y1:65,x2:63,y2:49,stroke:"#455A64",strokeWidth:2}),e.jsx("rect",{x:90,y:40,width:60,height:35,rx:3,fill:"#1976D2",stroke:"#0D47A1",strokeWidth:1}),e.jsx("circle",{cx:120,cy:57,r:10,fill:"#1E88E5",stroke:"#1565C0",strokeWidth:1}),e.jsx("text",{x:120,y:61,fontSize:12,fill:"#fff",textAnchor:"middle",children:"âš¡"}),e.jsx("rect",{x:5,y:52,width:15,height:10,fill:"#FFC107",stroke:"#FFA000",strokeWidth:1}),e.jsx("text",{x:12,y:60,fontSize:7,fill:"#333",textAnchor:"middle",children:"G"}),e.jsx("rect",{x:145,y:20,width:20,height:10,rx:2,fill:"#424242",stroke:"#212121",strokeWidth:1}),e.jsx("circle",{cx:165,cy:15,r:4,fill:"#757575",opacity:.4}),e.jsx("path",{d:"M 155 57 L 175 57",stroke:"#FFC107",strokeWidth:4,fill:"none"}),e.jsx("text",{x:90,y:110,fontSize:10,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Gas Generator"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:57,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"inputType"),children:e.jsx(i.Handle,{id:`gas-in-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:175,top:57,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"outputType"),children:e.jsx(i.Handle,{id:`gas-out-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"gasGenerator",label:"Gas Generator",labelTr:"Gaz Jenerator",category:"power",description:"Natural gas/LPG turbine generator",component:fo,defaultSize:{width:st,height:it},equipmentTypeCodes:["gas_generator","turbine_generator","lpg_generator"]});const rt=160,nt=120,uo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:rt,height:nt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:rt,height:nt,viewBox:"0 0 160 120",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`heater-body-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#B71C1C"}),e.jsx("stop",{offset:"50%",stopColor:"#E53935"}),e.jsx("stop",{offset:"100%",stopColor:"#B71C1C"})]}),e.jsxs("linearGradient",{id:`heater-element-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FF5722"}),e.jsx("stop",{offset:"50%",stopColor:"#FF9800"}),e.jsx("stop",{offset:"100%",stopColor:"#FF5722"})]})]}),e.jsx("rect",{x:30,y:25,width:100,height:70,rx:5,fill:`url(#heater-body-${o})`,stroke:"#7f0000",strokeWidth:2}),e.jsx("rect",{x:45,y:40,width:70,height:8,rx:2,fill:`url(#heater-element-${o})`}),e.jsx("rect",{x:45,y:56,width:70,height:8,rx:2,fill:`url(#heater-element-${o})`}),e.jsx("rect",{x:45,y:72,width:70,height:8,rx:2,fill:`url(#heater-element-${o})`}),e.jsx("rect",{x:5,y:55,width:25,height:10,fill:"#757575",stroke:"#424242",strokeWidth:1}),e.jsx("rect",{x:130,y:55,width:25,height:10,fill:"#757575",stroke:"#424242",strokeWidth:1}),e.jsx("circle",{cx:80,y:15,r:8,fill:"#fff",stroke:"#B71C1C",strokeWidth:2}),e.jsx("text",{x:80,y:18,fontSize:8,fill:"#B71C1C",textAnchor:"middle",fontWeight:"bold",children:"T"}),e.jsx("text",{x:80,y:110,fontSize:11,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Heater"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"leftType"),children:e.jsx(i.Handle,{id:`heater-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:155,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"rightType"),children:e.jsx(i.Handle,{id:`heater-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"heater",label:"Heater",labelTr:"Isitici",category:"heating_cooling",description:"Industrial water heater unit",component:uo,defaultSize:{width:rt,height:nt},equipmentTypeCodes:["heater","water_heater","heat_exchanger"]});const lt=120,ct=100,xo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:lt,height:ct,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:lt,height:ct,viewBox:"0 0 120 100",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`hepa-frame-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#455A64"})]}),e.jsxs("pattern",{id:`hepa-media-${o}`,width:"8",height:"8",patternUnits:"userSpaceOnUse",children:[e.jsx("rect",{width:"8",height:"8",fill:"#ECEFF1"}),e.jsx("line",{x1:"0",y1:"0",x2:"8",y2:"8",stroke:"#CFD8DC",strokeWidth:"0.5"}),e.jsx("line",{x1:"8",y1:"0",x2:"0",y2:"8",stroke:"#CFD8DC",strokeWidth:"0.5"})]})]}),e.jsx("rect",{x:25,y:15,width:70,height:60,rx:3,fill:`url(#hepa-frame-${o})`,stroke:"#37474F",strokeWidth:2}),e.jsx("rect",{x:30,y:20,width:60,height:50,fill:`url(#hepa-media-${o})`}),[0,1,2,3,4,5].map(u=>e.jsx("path",{d:`M ${35+u*10} 25 L ${40+u*10} 65 L ${35+u*10} 65 L ${30+u*10} 25 Z`,fill:"#B0BEC5",stroke:"#78909C",strokeWidth:.5},u)),e.jsx("rect",{x:5,y:35,width:20,height:20,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:95,y:35,width:20,height:20,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("path",{d:"M 10 45 L 20 45",stroke:"#4FC3F7",strokeWidth:2,markerEnd:"url(#arrow)"}),e.jsx("path",{d:"M 100 45 L 110 45",stroke:"#4FC3F7",strokeWidth:2,markerEnd:"url(#arrow)"}),e.jsx("text",{x:60,y:48,fontSize:10,fill:"#263238",textAnchor:"middle",fontWeight:"bold",children:"HEPA"}),e.jsx("text",{x:60,y:90,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"HEPA Filter"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:45,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"leftType"),children:e.jsx(i.Handle,{id:`hepa-in-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:115,top:45,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"rightType"),children:e.jsx(i.Handle,{id:`hepa-out-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"hepaFilter",label:"HEPA Filter",labelTr:"HEPA Filtre",category:"filtration",description:"High-Efficiency Particulate Air filter",component:xo,defaultSize:{width:lt,height:ct},equipmentTypeCodes:["hepa_filter","air_filter","particulate_filter"]});const dt=180,pt=200,yo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"source"),[l,k]=a.useState((t==null?void 0:t.bottomType)||"source"),u=m=>m==="source"?"#22c55e":"#3b82f6",f=(m,b,v)=>j=>{if(n)return;j.preventDefault(),j.stopPropagation();const D=m==="source"?"target":"source";b(D),h(E=>E.map(C=>C.id===o?{...C,data:{...C.data,[v]:D}}:C))};a.useEffect(()=>{p(o)},[o,r,d,l,p]);const g=Array.from({length:25},(m,b)=>({cx:35+Math.random()*110,cy:60+Math.random()*100,r:6+Math.random()*4}));return e.jsxs("div",{style:{width:dt,height:pt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:dt,height:pt,viewBox:"0 0 180 200",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`mbbr-tank-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#455A64"})]}),e.jsxs("linearGradient",{id:`mbbr-water-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4DB6AC",stopOpacity:.4}),e.jsx("stop",{offset:"100%",stopColor:"#26A69A",stopOpacity:.6})]}),e.jsxs("radialGradient",{id:`mbbr-carrier-${o}`,cx:"30%",cy:"30%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FFF8E1"}),e.jsx("stop",{offset:"100%",stopColor:"#FFD54F"})]})]}),e.jsx("rect",{x:25,y:30,width:130,height:140,rx:5,fill:`url(#mbbr-tank-${o})`,stroke:"#37474F",strokeWidth:2}),e.jsx("rect",{x:30,y:50,width:120,height:115,fill:`url(#mbbr-water-${o})`}),g.map((m,b)=>e.jsxs("g",{children:[e.jsx("circle",{cx:m.cx,cy:m.cy,r:m.r,fill:`url(#mbbr-carrier-${o})`,stroke:"#FFA000",strokeWidth:.5}),e.jsx("circle",{cx:m.cx,cy:m.cy,r:m.r*.3,fill:"none",stroke:"#FFA000",strokeWidth:.5})]},b)),e.jsx("circle",{cx:50,cy:140,r:3,fill:"#E0F7FA",opacity:.7}),e.jsx("circle",{cx:90,cy:150,r:4,fill:"#E0F7FA",opacity:.6}),e.jsx("circle",{cx:130,cy:145,r:3,fill:"#E0F7FA",opacity:.7}),e.jsx("circle",{cx:70,cy:130,r:2,fill:"#E0F7FA",opacity:.5}),e.jsx("circle",{cx:110,cy:135,r:3,fill:"#E0F7FA",opacity:.6}),e.jsx("rect",{x:40,y:165,width:100,height:5,rx:2,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:5,y:65,width:20,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:155,y:65,width:20,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:85,y:175,width:10,height:20,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("text",{x:90,y:20,fontSize:12,fill:"#333",textAnchor:"middle",fontWeight:"bold",children:(t==null?void 0:t.label)||"MBBR"}),e.jsx("text",{x:90,y:45,fontSize:8,fill:"#666",textAnchor:"middle",children:"Moving Bed Biofilm Reactor"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:70,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(r,c,"leftType"),children:e.jsx(i.Handle,{id:`mbbr-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:u(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:175,top:70,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(d,x,"rightType"),children:e.jsx(i.Handle,{id:`mbbr-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:90,top:195,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:f(l,k,"bottomType"),children:e.jsx(i.Handle,{id:`mbbr-bottom-${l}`,type:l,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"mbbr",label:"MBBR",labelTr:"MBBR BiyoreaktÃ¶r",category:"filtration",description:"Moving Bed Biofilm Reactor",component:yo,defaultSize:{width:dt,height:pt},equipmentTypeCodes:["mbbr","biofilter","moving_bed"]});const ht=100,at=150,go=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.outputType)||"source"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,outputType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:ht,height:at,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:ht,height:at,viewBox:"0 0 100 150",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`o2-tank-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#0277BD"}),e.jsx("stop",{offset:"50%",stopColor:"#0288D1"}),e.jsx("stop",{offset:"100%",stopColor:"#0277BD"})]}),e.jsxs("linearGradient",{id:`o2-liquid-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4FC3F7",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#0288D1",stopOpacity:.9})]})]}),e.jsx("ellipse",{cx:50,cy:30,rx:30,ry:15,fill:"#01579B",stroke:"#014B7C",strokeWidth:2}),e.jsx("rect",{x:20,y:30,width:60,height:80,fill:`url(#o2-tank-${o})`,stroke:"#01579B",strokeWidth:2}),e.jsx("ellipse",{cx:50,cy:110,rx:30,ry:15,fill:"#0277BD",stroke:"#01579B",strokeWidth:2}),e.jsx("ellipse",{cx:50,cy:70,rx:25,ry:10,fill:`url(#o2-liquid-${o})`}),e.jsx("rect",{x:25,y:70,width:50,height:35,fill:`url(#o2-liquid-${o})`}),e.jsx("ellipse",{cx:50,cy:105,rx:25,ry:10,fill:"#0288D1"}),e.jsx("circle",{cx:30,cy:50,r:3,fill:"#E1F5FE",opacity:.6}),e.jsx("circle",{cx:70,cy:60,r:4,fill:"#E1F5FE",opacity:.5}),e.jsx("circle",{cx:35,cy:80,r:3,fill:"#E1F5FE",opacity:.4}),e.jsx("circle",{cx:50,cy:20,r:8,fill:"#ECEFF1",stroke:"#90A4AE",strokeWidth:1}),e.jsx("line",{x1:50,y1:15,x2:53,y2:22,stroke:"#E53935",strokeWidth:1}),e.jsx("rect",{x:70,y:85,width:25,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("text",{x:50,y:95,fontSize:14,fill:"#E1F5FE",textAnchor:"middle",fontWeight:"bold",children:"Oâ‚‚"}),e.jsx("text",{x:50,y:140,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Oâ‚‚ Generator"})]}),e.jsx("div",{style:{position:"absolute",left:95,top:90,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`o2-out-${r}`,type:r,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"oxygenGenerator",label:"Oxygen Generator",labelTr:"Oksijen Jeneratoru",category:"aeration",description:"LOX/PSA oxygen generator",component:go,defaultSize:{width:ht,height:at},equipmentTypeCodes:["oxygen_generator","lox_tank","psa_oxygen"]});const ft=120,ut=140,bo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.airInType)||"target"),[d,x]=a.useState((t==null?void 0:t.ozoneOutType)||"source"),l=u=>u==="source"?"#22c55e":"#3b82f6",k=(u,f,g)=>m=>{if(n)return;m.preventDefault(),m.stopPropagation();const b=u==="source"?"target":"source";f(b),h(v=>v.map(j=>j.id===o?{...j,data:{...j.data,[g]:b}}:j))};return a.useEffect(()=>{p(o)},[o,r,d,p]),e.jsxs("div",{style:{width:ft,height:ut,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:ft,height:ut,viewBox:"0 0 120 140",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`ozone-body-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#5E35B1"}),e.jsx("stop",{offset:"50%",stopColor:"#7E57C2"}),e.jsx("stop",{offset:"100%",stopColor:"#5E35B1"})]}),e.jsxs("linearGradient",{id:`ozone-glow-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#B388FF",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#7C4DFF",stopOpacity:.4})]})]}),e.jsx("rect",{x:20,y:25,width:80,height:90,rx:5,fill:`url(#ozone-body-${o})`,stroke:"#4527A0",strokeWidth:2}),e.jsx("rect",{x:35,y:40,width:50,height:60,rx:3,fill:"#311B92",stroke:"#4527A0",strokeWidth:1}),e.jsx("ellipse",{cx:60,cy:70,rx:15,ry:20,fill:`url(#ozone-glow-${o})`}),e.jsx("path",{d:"M 45 55 L 55 65 L 45 75 L 55 85",stroke:"#B388FF",strokeWidth:2,fill:"none"}),e.jsx("path",{d:"M 65 55 L 75 65 L 65 75 L 75 85",stroke:"#B388FF",strokeWidth:2,fill:"none"}),e.jsx("rect",{x:5,y:55,width:15,height:12,fill:"#90CAF9",stroke:"#42A5F5",strokeWidth:1}),e.jsx("text",{x:12,y:64,fontSize:7,fill:"#1565C0",textAnchor:"middle",children:"Oâ‚‚"}),e.jsx("rect",{x:100,y:55,width:15,height:12,fill:"#CE93D8",stroke:"#AB47BC",strokeWidth:1}),e.jsx("text",{x:108,y:64,fontSize:7,fill:"#7B1FA2",textAnchor:"middle",children:"Oâ‚ƒ"}),e.jsx("rect",{x:30,y:30,width:60,height:8,rx:2,fill:"#1A1A2E"}),e.jsx("circle",{cx:40,cy:34,r:2,fill:"#4CAF50"}),e.jsx("circle",{cx:50,cy:34,r:2,fill:"#FFC107"}),e.jsx("circle",{cx:60,cy:34,r:2,fill:"#2196F3"}),e.jsx("text",{x:60,y:110,fontSize:14,fill:"#E1BEE7",textAnchor:"middle",fontWeight:"bold",children:"Oâ‚ƒ"}),e.jsx("text",{x:60,y:130,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Ozone Generator"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:61,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(r,c,"airInType"),children:e.jsx(i.Handle,{id:`ozone-in-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:l(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:115,top:61,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:k(d,x,"ozoneOutType"),children:e.jsx(i.Handle,{id:`ozone-out-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:l(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"ozoneGenerator",label:"Ozone Generator",labelTr:"Ozon Jeneratoru",category:"disinfection",description:"Ozone generator for water disinfection",component:bo,defaultSize:{width:ft,height:ut},equipmentTypeCodes:["ozone_generator","ozonator","ozone_unit"]});const xt=140,yt=160,jo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.hotInType)||"target"),[d,x]=a.useState((t==null?void 0:t.hotOutType)||"source"),[l,k]=a.useState((t==null?void 0:t.coldInType)||"target"),[u,f]=a.useState((t==null?void 0:t.coldOutType)||"source"),g=b=>b==="source"?"#22c55e":"#3b82f6",m=(b,v,j)=>D=>{if(n)return;D.preventDefault(),D.stopPropagation();const E=b==="source"?"target":"source";v(E),h(C=>C.map(P=>P.id===o?{...P,data:{...P.data,[j]:E}}:P))};return a.useEffect(()=>{p(o)},[o,r,d,l,u,p]),e.jsxs("div",{style:{width:xt,height:yt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:xt,height:yt,viewBox:"0 0 140 160",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`plate-frame-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#455A64"})]})}),e.jsx("rect",{x:30,y:25,width:80,height:100,rx:3,fill:`url(#plate-frame-${o})`,stroke:"#37474F",strokeWidth:2}),[0,1,2,3,4,5,6].map(b=>e.jsx("rect",{x:35,y:32+b*13,width:70,height:10,rx:1,fill:"#78909C",stroke:"#546E7A",strokeWidth:.5},b)),e.jsx("rect",{x:5,y:35,width:25,height:10,fill:"#EF5350",stroke:"#E53935",strokeWidth:1}),e.jsx("rect",{x:110,y:105,width:25,height:10,fill:"#EF5350",stroke:"#E53935",strokeWidth:1}),e.jsx("text",{x:18,y:43,fontSize:7,fill:"#fff",textAnchor:"middle",children:"HOT"}),e.jsx("rect",{x:110,y:35,width:25,height:10,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("rect",{x:5,y:105,width:25,height:10,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("text",{x:122,y:43,fontSize:7,fill:"#fff",textAnchor:"middle",children:"COLD"}),e.jsx("path",{d:"M 55 50 L 85 100",stroke:"#FF5722",strokeWidth:2,strokeDasharray:"4,2",opacity:.6}),e.jsx("path",{d:"M 85 50 L 55 100",stroke:"#2196F3",strokeWidth:2,strokeDasharray:"4,2",opacity:.6}),e.jsx("text",{x:70,y:145,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Plate HX"}),e.jsx("text",{x:70,y:155,fontSize:7,fill:"#666",textAnchor:"middle",children:"Heat Exchanger"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:40,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(r,c,"hotInType"),children:e.jsx(i.Handle,{id:`plate-hot-in-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:g(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:135,top:110,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(d,x,"hotOutType"),children:e.jsx(i.Handle,{id:`plate-hot-out-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:g(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:135,top:40,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(l,k,"coldInType"),children:e.jsx(i.Handle,{id:`plate-cold-in-${l}`,type:l,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:g(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:5,top:110,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(u,f,"coldOutType"),children:e.jsx(i.Handle,{id:`plate-cold-out-${u}`,type:u,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:g(u),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"plateHeatExchanger",label:"Plate Heat Exchanger",labelTr:"Plakali Isi Degistirici",category:"heating_cooling",description:"Plate-type heat exchanger",component:jo,defaultSize:{width:xt,height:yt},equipmentTypeCodes:["plate_heat_exchanger","phe","plate_hx"]});const gt=100,bt=80,ko=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,r=(t==null?void 0:t.isRunning)!==!1,[c,d]=a.useState((t==null?void 0:t.inletType)||"target"),[x,l]=a.useState((t==null?void 0:t.outletType)||"source"),k=f=>f==="source"?"#22c55e":"#3b82f6",u=(f,g,m)=>b=>{if(n)return;b.preventDefault(),b.stopPropagation();const v=f==="source"?"target":"source";g(v),h(j=>j.map(D=>D.id===o?{...D,data:{...D.data,[m]:v}}:D))};return a.useEffect(()=>{p(o)},[o,c,x,p]),e.jsxs("div",{style:{width:gt,height:bt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:gt,height:bt,viewBox:"0 0 100 80",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`pump-body-${o}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:r?"#1565C0":"#546E7A"}),e.jsx("stop",{offset:"50%",stopColor:r?"#1976D2":"#78909C"}),e.jsx("stop",{offset:"100%",stopColor:r?"#1565C0":"#546E7A"})]})}),e.jsx("rect",{x:5,y:30,width:20,height:12,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("circle",{cx:50,cy:36,r:22,fill:`url(#pump-body-${o})`,stroke:r?"#0D47A1":"#455A64",strokeWidth:2}),e.jsx("circle",{cx:50,cy:36,r:12,fill:r?"#0D47A1":"#455A64"}),r&&e.jsxs(e.Fragment,{children:[e.jsx("line",{x1:50,y1:24,x2:50,y2:48,stroke:"#1E88E5",strokeWidth:2}),e.jsx("line",{x1:38,y1:36,x2:62,y2:36,stroke:"#1E88E5",strokeWidth:2}),e.jsx("line",{x1:42,y1:28,x2:58,y2:44,stroke:"#1E88E5",strokeWidth:2}),e.jsx("line",{x1:42,y1:44,x2:58,y2:28,stroke:"#1E88E5",strokeWidth:2})]}),e.jsx("rect",{x:44,y:5,width:12,height:15,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:72,y:26,width:23,height:20,rx:2,fill:"#455A64",stroke:"#37474F",strokeWidth:1}),e.jsx("circle",{cx:83,cy:36,r:6,fill:r?"#4CAF50":"#757575",stroke:"#333",strokeWidth:1}),e.jsx("circle",{cx:83,cy:36,r:3,fill:r?"#81C784":"#9E9E9E"}),e.jsx("text",{x:50,y:72,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Pump"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:36,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:u(c,d,"inletType"),children:e.jsx(i.Handle,{id:`pump-inlet-${c}`,type:c,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:k(c),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:50,top:5,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:u(x,l,"outletType"),children:e.jsx(i.Handle,{id:`pump-outlet-${x}`,type:x,position:i.Position.Top,style:{position:"relative",width:"100%",height:"100%",background:k(x),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"pump",label:"Pump",labelTr:"Pompa",category:"pump",description:"Centrifugal water pump",component:ko,defaultSize:{width:gt,height:bt},equipmentTypeCodes:["pump","centrifugal_pump","water_pump","circulation_pump"]});const jt=120,kt=160,mo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.leftType)||"target"),[d,x]=a.useState((t==null?void 0:t.rightType)||"target"),[l,k]=a.useState((t==null?void 0:t.bottomType)||"source"),u=m=>m==="source"?"#22c55e":"#3b82f6",f=m=>m==="source"?"target":"source",g=(m,b)=>{if(n)return;m.preventDefault(),m.stopPropagation();const v=f(b==="left"?r:b==="right"?d:l);h(j=>j.map(D=>D.id===o?{...D,data:{...D.data,[`${b}Type`]:v}}:D)),b==="left"&&c(v),b==="right"&&x(v),b==="bottom"&&k(v)};return a.useEffect(()=>{p(o)},[r,d,l,o,p]),e.jsxs("div",{style:{width:jt,height:kt,position:"relative",pointerEvents:"none",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:jt,height:kt,style:{pointerEvents:"auto"},children:[e.jsx("rect",{x:"20",y:"40",width:"80",height:"80",fill:"#8e7c66",opacity:"0.8"}),e.jsx("polygon",{points:"20,120 60,160 100,120",fill:"#8e7c66",opacity:"0.8"}),e.jsx("ellipse",{cx:"60",cy:"20",rx:"40",ry:"10",fill:"#bbb",stroke:"#333",strokeWidth:"2"}),e.jsx("line",{x1:"20",y1:"20",x2:"20",y2:"120",stroke:"#333",strokeWidth:"2"}),e.jsx("line",{x1:"100",y1:"20",x2:"100",y2:"120",stroke:"#333",strokeWidth:"2"}),e.jsx("polygon",{points:"20,120 60,160 100,120",fill:"#bbb",stroke:"#333",strokeWidth:"2"}),e.jsx("rect",{x:"0",y:"50",width:"20",height:"20",fill:"#888",stroke:"#333",strokeWidth:"2"}),e.jsx("rect",{x:"100",y:"50",width:"20",height:"20",fill:"#888",stroke:"#333",strokeWidth:"2"}),e.jsx("text",{x:"60",y:"90",fill:"#000",textAnchor:"middle",fontSize:"12",children:(t==null?void 0:t.label)||"Settler"})]}),e.jsx("div",{style:{position:"absolute",left:10,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m=>g(m,"left"),children:e.jsx(i.Handle,{id:`radial-left-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:u(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:110,top:60,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m=>g(m,"right"),children:e.jsx(i.Handle,{id:`radial-right-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:u(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:60,top:160,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m=>g(m,"bottom"),children:e.jsx(i.Handle,{id:`radial-bottom-${l}`,type:l,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:u(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"radialSettler",label:"Radial Settler",labelTr:"Radyal Ã‡Ã¶ktÃ¼rÃ¼cÃ¼",category:"filtration",description:"Conical settling tank for solids separation",component:mo,defaultSize:{width:jt,height:kt},equipmentTypeCodes:["radial_settler","settler","settling_tank"]});const mt=80,vt=100,bs={pH:{bg:"#E8F5E9",stroke:"#4CAF50",text:"#2E7D32"},DO:{bg:"#E3F2FD",stroke:"#2196F3",text:"#1565C0"},temperature:{bg:"#FFF3E0",stroke:"#FF9800",text:"#E65100"},conductivity:{bg:"#F3E5F5",stroke:"#9C27B0",text:"#6A1B9A"},turbidity:{bg:"#EFEBE9",stroke:"#795548",text:"#4E342E"},flow:{bg:"#E0F7FA",stroke:"#00BCD4",text:"#00838F"},level:{bg:"#FCE4EC",stroke:"#E91E63",text:"#AD1457"},pressure:{bg:"#FFFDE7",stroke:"#FFEB3B",text:"#F57F17"}},js={pH:"pH",DO:"Oâ‚‚",temperature:"Â°C",conductivity:"Î¼S",turbidity:"NTU",flow:"mÂ³",level:"%",pressure:"bar"},vo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,r=(t==null?void 0:t.sensorType)||"pH",c=bs[r],d=js[r],[x,l]=a.useState((t==null?void 0:t.connectionType)||"target"),k=f=>f==="source"?"#22c55e":"#3b82f6",u=f=>{if(n)return;f.preventDefault(),f.stopPropagation();const g=x==="source"?"target":"source";l(g),h(m=>m.map(b=>b.id===o?{...b,data:{...b.data,connectionType:g}}:b))};return a.useEffect(()=>{p(o)},[o,x,p]),e.jsxs("div",{style:{width:mt,height:vt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:mt,height:vt,viewBox:"0 0 80 100",children:[e.jsx("circle",{cx:40,cy:40,r:30,fill:c.bg,stroke:c.stroke,strokeWidth:2}),e.jsx("circle",{cx:40,cy:40,r:20,fill:"white",stroke:c.stroke,strokeWidth:1}),e.jsx("text",{x:40,y:45,fontSize:14,fill:c.text,textAnchor:"middle",fontWeight:"bold",children:d}),e.jsx("rect",{x:37,y:70,width:6,height:20,rx:2,fill:c.stroke}),(t==null?void 0:t.value)!==void 0&&e.jsxs("text",{x:40,y:55,fontSize:8,fill:c.text,textAnchor:"middle",children:[t.value,t.unit||""]}),e.jsx("text",{x:40,y:95,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||r})]}),e.jsx("div",{style:{position:"absolute",left:40,top:90,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:u,children:e.jsx(i.Handle,{id:`sensor-conn-${x}`,type:x,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:k(x),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"sensor",label:"Sensor",labelTr:"Sensor",category:"monitoring",description:"Generic sensor for water quality monitoring",component:vo,defaultSize:{width:mt,height:vt},equipmentTypeCodes:["sensor","probe","transmitter"]});const Tt=200,wt=100,To=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.shellInType)||"target"),[d,x]=a.useState((t==null?void 0:t.shellOutType)||"source"),[l,k]=a.useState((t==null?void 0:t.tubeInType)||"target"),[u,f]=a.useState((t==null?void 0:t.tubeOutType)||"source"),g=b=>b==="source"?"#22c55e":"#3b82f6",m=(b,v,j)=>D=>{if(n)return;D.preventDefault(),D.stopPropagation();const E=b==="source"?"target":"source";v(E),h(C=>C.map(P=>P.id===o?{...P,data:{...P.data,[j]:E}}:P))};return a.useEffect(()=>{p(o)},[o,r,d,l,u,p]),e.jsxs("div",{style:{width:Tt,height:wt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Tt,height:wt,viewBox:"0 0 200 100",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`shell-body-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"50%",stopColor:"#78909C"}),e.jsx("stop",{offset:"100%",stopColor:"#607D8B"})]})}),e.jsx("ellipse",{cx:30,cy:45,rx:15,ry:25,fill:"#546E7A",stroke:"#455A64",strokeWidth:2}),e.jsx("rect",{x:30,y:20,width:140,height:50,fill:`url(#shell-body-${o})`,stroke:"#455A64",strokeWidth:2}),e.jsx("ellipse",{cx:170,cy:45,rx:15,ry:25,fill:"#546E7A",stroke:"#455A64",strokeWidth:2}),[0,1,2,3].map(b=>e.jsx("line",{x1:35,y1:28+b*12,x2:165,y2:28+b*12,stroke:"#90A4AE",strokeWidth:3},b)),e.jsx("rect",{x:55,y:5,width:20,height:15,fill:"#EF5350",stroke:"#E53935",strokeWidth:1}),e.jsx("text",{x:65,y:17,fontSize:7,fill:"#fff",textAnchor:"middle",children:"S"}),e.jsx("rect",{x:125,y:70,width:20,height:15,fill:"#EF5350",stroke:"#E53935",strokeWidth:1}),e.jsx("text",{x:135,y:82,fontSize:7,fill:"#fff",textAnchor:"middle",children:"S"}),e.jsx("rect",{x:5,y:38,width:15,height:14,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("text",{x:12,y:48,fontSize:7,fill:"#fff",textAnchor:"middle",children:"T"}),e.jsx("rect",{x:180,y:38,width:15,height:14,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("text",{x:188,y:48,fontSize:7,fill:"#fff",textAnchor:"middle",children:"T"}),e.jsx("text",{x:100,y:95,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Shell & Tube HX"})]}),e.jsx("div",{style:{position:"absolute",left:65,top:5,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(r,c,"shellInType"),children:e.jsx(i.Handle,{id:`st-shell-in-${r}`,type:r,position:i.Position.Top,style:{position:"relative",width:"100%",height:"100%",background:g(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:135,top:85,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(d,x,"shellOutType"),children:e.jsx(i.Handle,{id:`st-shell-out-${d}`,type:d,position:i.Position.Bottom,style:{position:"relative",width:"100%",height:"100%",background:g(d),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:5,top:45,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(l,k,"tubeInType"),children:e.jsx(i.Handle,{id:`st-tube-in-${l}`,type:l,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:g(l),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:195,top:45,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:m(u,f,"tubeOutType"),children:e.jsx(i.Handle,{id:`st-tube-out-${u}`,type:u,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:g(u),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"shellTubeHeatExchanger",label:"Shell & Tube HX",labelTr:"Govde-Boru Isi Degistirici",category:"heating_cooling",description:"Shell and tube heat exchanger",component:To,defaultSize:{width:Tt,height:wt},equipmentTypeCodes:["shell_tube_heat_exchanger","sthe","shell_tube_hx"]});const ke=100,me=160,wo=({id:o,data:t,selected:y})=>{const p=(t==null?void 0:t.rotation)??0,h=(t==null?void 0:t.isScadaMode)||!1,n=i.useUpdateNodeInternals(),{setNodes:r}=i.useReactFlow(),[c,d]=a.useState((t==null?void 0:t.top)??"target"),[x,l]=a.useState((t==null?void 0:t.bottom)??"source"),k=E=>E==="source"?"#22c55e":"#3b82f6",u=ke/2,f=me/2,g=de(u,f,30,20,p),m=de(u,f,30,140,p),b=E=>{r(C=>C.map(P=>P.id===o?{...P,data:{...P.data,...E}}:P))},v=(E,C,P,L)=>{if(h)return;E.preventDefault(),E.stopPropagation();const z=C==="source"?"target":"source";P(z),b({[L]:z})},j=E=>{if(h)return;E.stopPropagation();const C=((p||0)+90)%360;b({rotation:C})};a.useEffect(()=>{n(o)},[o,c,x,p,n]);const D=[40,55,70,85,100,115];return e.jsxs("div",{style:{width:ke,height:me,position:"relative",pointerEvents:"none",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[!h&&e.jsx("button",{onClick:j,style:{position:"absolute",top:2,right:2,zIndex:10,fontSize:12,cursor:"pointer",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:4,padding:"2px 6px",pointerEvents:"all"},children:"â†»"}),e.jsx("div",{style:{transform:`rotate(${p}deg)`,transformOrigin:"center center",width:ke,height:me,pointerEvents:"auto"},children:e.jsxs("svg",{width:ke,height:me,children:[e.jsx("rect",{x:25,y:20,width:10,height:120,fill:"#888",stroke:"#333",strokeWidth:1.5,rx:3}),D.map((E,C)=>e.jsxs("g",{children:[e.jsx("circle",{cx:30,cy:E,r:1.8,fill:"#b3d9ff"}),e.jsx("polygon",{points:`32,${E} 42,${E-4} 42,${E+4}`,fill:"#1ca3ec",opacity:.8})]},C)),e.jsx("text",{x:50,y:150,textAnchor:"middle",fontSize:10,fill:"#000",children:(t==null?void 0:t.label)||"Tank Inlet"})]})}),e.jsx("div",{style:{position:"absolute",left:g.x,top:g.y,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:E=>v(E,c,d,"top"),children:e.jsx(i.Handle,{id:`tankinlet-top-${c}`,type:c,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:k(c),borderRadius:"50%",border:"2px solid white",cursor:h?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:m.x,top:m.y,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:E=>v(E,x,l,"bottom"),children:e.jsx(i.Handle,{id:`tankinlet-bottom-${x}`,type:x,position:void 0,style:{position:"relative",width:"100%",height:"100%",background:k(x),borderRadius:"50%",border:"2px solid white",cursor:h?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"tankInlet",label:"Tank Inlet",labelTr:"Tank Girisi",category:"utility",description:"Water inlet pipe with distribution holes",component:wo,defaultSize:{width:ke,height:me},equipmentTypeCodes:["tank_inlet","inlet","water_inlet"]});const se=.8,Et=260*se,Ct=280*se,Eo=({id:o,data:t,selected:y})=>{const p=(t==null?void 0:t.isScadaMode)||!1,h=i.useUpdateNodeInternals(),{setNodes:n}=i.useReactFlow(),[r,c]=a.useState((t==null?void 0:t.backflushType)||"target"),[d,x]=a.useState((t==null?void 0:t.feedType)||"target"),[l,k]=a.useState((t==null?void 0:t.cleanWaterType)||"source"),[u,f]=a.useState((t==null?void 0:t.plc1Type)||"source"),[g,m]=a.useState((t==null?void 0:t.plc2Type)||"source"),[b,v]=a.useState((t==null?void 0:t.plc3Type)||"source"),[j,D]=a.useState((t==null?void 0:t.elec1Type)||"target"),[E,C]=a.useState((t==null?void 0:t.elec2Type)||"target"),[P,L]=a.useState((t==null?void 0:t.elec3Type)||"target"),z=O=>O==="source"?"#22c55e":"#3b82f6",Y=(O,R,w)=>F=>{if(p)return;F.preventDefault(),F.stopPropagation();const M=O==="source"?"target":"source";R(M),n(B=>B.map(U=>U.id===o?{...U,data:{...U.data,[w]:M}}:U))};return a.useEffect(()=>{h(o)},[o,r,d,l,u,g,b,j,E,P,h]),e.jsxs("div",{style:{position:"relative",width:Et,height:Ct,border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Et,height:Ct,viewBox:"0 0 260 280",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"uf-cylinderGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9E9E9E"}),e.jsx("stop",{offset:"20%",stopColor:"#E0E0E0"}),e.jsx("stop",{offset:"50%",stopColor:"#FAFAFA"}),e.jsx("stop",{offset:"80%",stopColor:"#BDBDBD"}),e.jsx("stop",{offset:"100%",stopColor:"#757575"})]}),e.jsxs("radialGradient",{id:"uf-topCapGradient",cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#BDBDBD"}),e.jsx("stop",{offset:"70%",stopColor:"#9E9E9E"}),e.jsx("stop",{offset:"100%",stopColor:"#616161"})]}),e.jsxs("radialGradient",{id:"uf-bottomCapGradient",cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#757575"}),e.jsx("stop",{offset:"100%",stopColor:"#424242"})]}),e.jsxs("linearGradient",{id:"uf-pipeGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#78909C"}),e.jsx("stop",{offset:"50%",stopColor:"#B0BEC5"}),e.jsx("stop",{offset:"100%",stopColor:"#546E7A"})]}),e.jsxs("linearGradient",{id:"uf-feedWater",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#1976D2"}),e.jsx("stop",{offset:"100%",stopColor:"#42A5F5"})]}),e.jsxs("linearGradient",{id:"uf-cleanWater",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4FC3F7"}),e.jsx("stop",{offset:"100%",stopColor:"#81D4FA"})]}),e.jsxs("linearGradient",{id:"uf-backflushWater",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#FF9800"}),e.jsx("stop",{offset:"100%",stopColor:"#FFB74D"})]}),e.jsxs("linearGradient",{id:"uf-autoBoxGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#455A64"}),e.jsx("stop",{offset:"50%",stopColor:"#607D8B"}),e.jsx("stop",{offset:"100%",stopColor:"#37474F"})]}),e.jsxs("linearGradient",{id:"uf-elecBoxGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#F57C00"}),e.jsx("stop",{offset:"50%",stopColor:"#FF9800"}),e.jsx("stop",{offset:"100%",stopColor:"#E65100"})]})]}),e.jsx("text",{x:"90",y:"14",fontSize:"11",fill:"#333",fontFamily:"Arial",textAnchor:"middle",fontWeight:"bold",children:"ULTRAFILTRATION"}),e.jsx("rect",{x:"20",y:"28",width:"140",height:"10",rx:"2",fill:"url(#uf-pipeGradient)",stroke:"#455A64",strokeWidth:"1.5"}),e.jsx("rect",{x:"5",y:"30",width:"15",height:"6",fill:"url(#uf-backflushWater)",stroke:"#E65100",strokeWidth:"1"}),e.jsx("circle",{cx:"5",cy:"33",r:"2.5",fill:"#222",stroke:"#111",strokeWidth:"1"}),e.jsx("text",{x:"3",y:"26",fontSize:"5",fill:"#E65100",fontFamily:"Arial",fontWeight:"bold",children:"BACKFLUSH"}),e.jsx("rect",{x:"160",y:"30",width:"15",height:"6",fill:"url(#uf-feedWater)",stroke:"#1565C0",strokeWidth:"1"}),e.jsx("circle",{cx:"175",cy:"33",r:"2.5",fill:"#222",stroke:"#111",strokeWidth:"1"}),e.jsx("text",{x:"162",y:"26",fontSize:"6",fill:"#1565C0",fontFamily:"Arial",fontWeight:"bold",children:"FEED"}),e.jsx("rect",{x:"42",y:"38",width:"8",height:"35",fill:"url(#uf-pipeGradient)",stroke:"#455A64",strokeWidth:"1"}),e.jsx("ellipse",{cx:"46",cy:"73",rx:"14",ry:"5",fill:"url(#uf-topCapGradient)",stroke:"#616161",strokeWidth:"1"}),e.jsx("rect",{x:"32",y:"73",width:"28",height:"120",fill:"url(#uf-cylinderGradient)",stroke:"#616161",strokeWidth:"1.5"}),e.jsx("line",{x1:"38",y1:"81",x2:"38",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"46",y1:"81",x2:"46",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"54",y1:"81",x2:"54",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("ellipse",{cx:"46",cy:"193",rx:"14",ry:"5",fill:"url(#uf-bottomCapGradient)",stroke:"#424242",strokeWidth:"1"}),e.jsx("rect",{x:"42",y:"193",width:"8",height:"35",fill:"url(#uf-cleanWater)",stroke:"#0288D1",strokeWidth:"1"}),e.jsx("rect",{x:"86",y:"38",width:"8",height:"35",fill:"url(#uf-pipeGradient)",stroke:"#455A64",strokeWidth:"1"}),e.jsx("ellipse",{cx:"90",cy:"73",rx:"14",ry:"5",fill:"url(#uf-topCapGradient)",stroke:"#616161",strokeWidth:"1"}),e.jsx("rect",{x:"76",y:"73",width:"28",height:"120",fill:"url(#uf-cylinderGradient)",stroke:"#616161",strokeWidth:"1.5"}),e.jsx("line",{x1:"82",y1:"81",x2:"82",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"90",y1:"81",x2:"90",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"98",y1:"81",x2:"98",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("ellipse",{cx:"90",cy:"193",rx:"14",ry:"5",fill:"url(#uf-bottomCapGradient)",stroke:"#424242",strokeWidth:"1"}),e.jsx("rect",{x:"86",y:"193",width:"8",height:"35",fill:"url(#uf-cleanWater)",stroke:"#0288D1",strokeWidth:"1"}),e.jsx("rect",{x:"130",y:"38",width:"8",height:"35",fill:"url(#uf-pipeGradient)",stroke:"#455A64",strokeWidth:"1"}),e.jsx("ellipse",{cx:"134",cy:"73",rx:"14",ry:"5",fill:"url(#uf-topCapGradient)",stroke:"#616161",strokeWidth:"1"}),e.jsx("rect",{x:"120",y:"73",width:"28",height:"120",fill:"url(#uf-cylinderGradient)",stroke:"#616161",strokeWidth:"1.5"}),e.jsx("line",{x1:"126",y1:"81",x2:"126",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"134",y1:"81",x2:"134",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("line",{x1:"142",y1:"81",x2:"142",y2:"185",stroke:"#BDBDBD",strokeWidth:"1",strokeDasharray:"4,3"}),e.jsx("ellipse",{cx:"134",cy:"193",rx:"14",ry:"5",fill:"url(#uf-bottomCapGradient)",stroke:"#424242",strokeWidth:"1"}),e.jsx("rect",{x:"130",y:"193",width:"8",height:"35",fill:"url(#uf-cleanWater)",stroke:"#0288D1",strokeWidth:"1"}),e.jsx("rect",{x:"20",y:"228",width:"140",height:"7",fill:"url(#uf-cleanWater)",stroke:"#0288D1",strokeWidth:"1.5"}),e.jsx("rect",{x:"160",y:"229",width:"15",height:"5",fill:"url(#uf-cleanWater)",stroke:"#0288D1",strokeWidth:"1"}),e.jsx("circle",{cx:"175",cy:"231.5",r:"2.5",fill:"#222",stroke:"#111",strokeWidth:"1"}),e.jsx("text",{x:"148",y:"245",fontSize:"5",fill:"#0288D1",fontFamily:"Arial",fontWeight:"bold",children:"CLEAN WATER"}),e.jsx("rect",{x:"195",y:"60",width:"38",height:"45",rx:"2",fill:"url(#uf-autoBoxGradient)",stroke:"#263238",strokeWidth:"1.5"}),e.jsx("text",{x:"214",y:"71",fontSize:"5",fill:"#B0BEC5",fontFamily:"Arial",textAnchor:"middle",fontWeight:"bold",children:"PLC"}),e.jsx("text",{x:"214",y:"79",fontSize:"4",fill:"#90A4AE",fontFamily:"Arial",textAnchor:"middle",children:"AUTOMATION"}),e.jsx("circle",{cx:"203",cy:"88",r:"2",fill:"#4CAF50",stroke:"#2E7D32",strokeWidth:"0.5"}),e.jsx("circle",{cx:"210",cy:"88",r:"2",fill:"#F44336",stroke:"#C62828",strokeWidth:"0.5"}),e.jsx("circle",{cx:"217",cy:"88",r:"2",fill:"#FFC107",stroke:"#F9A825",strokeWidth:"0.5"}),e.jsx("circle",{cx:"224",cy:"88",r:"2",fill:"#2196F3",stroke:"#1565C0",strokeWidth:"0.5"}),e.jsx("rect",{x:"201",y:"94",width:"26",height:"8",rx:"1",fill:"#1B5E20",stroke:"#0D47A1",strokeWidth:"0.5"}),e.jsx("text",{x:"214",y:"100",fontSize:"4",fill:"#76FF03",fontFamily:"monospace",textAnchor:"middle",children:"RUN"}),e.jsx("path",{d:"M 195 80 Q 180 80, 165 70 L 148 63",stroke:"#2196F3",strokeWidth:"1.5",fill:"none",strokeDasharray:"2,1"}),e.jsx("circle",{cx:"233",cy:"70",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"}),e.jsx("circle",{cx:"233",cy:"80",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"}),e.jsx("circle",{cx:"233",cy:"90",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"}),e.jsx("rect",{x:"195",y:"115",width:"38",height:"40",rx:"2",fill:"url(#uf-elecBoxGradient)",stroke:"#BF360C",strokeWidth:"1.5"}),e.jsx("text",{x:"214",y:"126",fontSize:"5",fill:"#FFF3E0",fontFamily:"Arial",textAnchor:"middle",fontWeight:"bold",children:"POWER"}),e.jsx("text",{x:"214",y:"133",fontSize:"4",fill:"#FFE0B2",fontFamily:"Arial",textAnchor:"middle",children:"ELECTRIC"}),e.jsx("rect",{x:"201",y:"137",width:"6",height:"10",rx:"1",fill:"#424242",stroke:"#212121",strokeWidth:"0.5"}),e.jsx("rect",{x:"211",y:"137",width:"6",height:"10",rx:"1",fill:"#424242",stroke:"#212121",strokeWidth:"0.5"}),e.jsx("rect",{x:"221",y:"137",width:"6",height:"10",rx:"1",fill:"#424242",stroke:"#212121",strokeWidth:"0.5"}),e.jsx("rect",{x:"202.5",y:"138",width:"3",height:"4",fill:"#4CAF50"}),e.jsx("rect",{x:"212.5",y:"138",width:"3",height:"4",fill:"#4CAF50"}),e.jsx("rect",{x:"222.5",y:"143",width:"3",height:"4",fill:"#F44336"}),e.jsx("path",{d:"M 195 130 Q 180 130, 165 115 L 148 105",stroke:"#F44336",strokeWidth:"1.5",fill:"none"}),e.jsx("circle",{cx:"233",cy:"125",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"}),e.jsx("circle",{cx:"233",cy:"135",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"}),e.jsx("circle",{cx:"233",cy:"145",r:"1.5",fill:"#222",stroke:"#111",strokeWidth:"0.8"})]}),e.jsx("div",{style:{position:"absolute",left:5*se,top:33*se,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:Y(r,c,"backflushType"),children:e.jsx(i.Handle,{id:`uf-backflush-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:z(r),borderRadius:"50%",border:"2px solid white",cursor:p?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:175*se,top:33*se,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:Y(d,x,"feedType"),children:e.jsx(i.Handle,{id:`uf-feed-${d}`,type:d,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:z(d),borderRadius:"50%",border:"2px solid white",cursor:p?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:175*se,top:231.5*se,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:Y(l,k,"cleanWaterType"),children:e.jsx(i.Handle,{id:`uf-cleanwater-${l}`,type:l,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:z(l),borderRadius:"50%",border:"2px solid white",cursor:p?"default":"pointer",transform:"none",left:0,top:0}})}),[70,80,90].map((O,R)=>{const w=[u,g,b],F=[f,m,v],M=["plc1Type","plc2Type","plc3Type"];return e.jsx("div",{style:{position:"absolute",left:233*se,top:O*se,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:Y(w[R],F[R],M[R]),children:e.jsx(i.Handle,{id:`uf-plc${R+1}-${w[R]}`,type:w[R],position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:z(w[R]),borderRadius:"50%",border:"2px solid white",cursor:p?"default":"pointer",transform:"none",left:0,top:0}})},`plc-${R}`)}),[125,135,145].map((O,R)=>{const w=[j,E,P],F=[D,C,L],M=["elec1Type","elec2Type","elec3Type"];return e.jsx("div",{style:{position:"absolute",left:233*se,top:O*se,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:Y(w[R],F[R],M[R]),children:e.jsx(i.Handle,{id:`uf-elec${R+1}-${w[R]}`,type:w[R],position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:z(w[R]),borderRadius:"50%",border:"2px solid white",cursor:p?"default":"pointer",transform:"none",left:0,top:0}})},`elec-${R}`)})]})};H.register({id:"ultrafiltration",label:"Ultrafiltration",labelTr:"Ultrafiltrasyon",category:"filtration",description:"Membrane ultrafiltration unit with PLC and power connections",component:Eo,defaultSize:{width:Et,height:Ct},equipmentTypeCodes:["ultrafiltration","uf","membrane_filter"]});const Co=160,So=100,Wo=({id:o,selected:t,data:y})=>{const p=(y==null?void 0:y.rotation)||0,h=(y==null?void 0:y.isScadaMode)||!1,n=(y==null?void 0:y.handles)||[{id:"uv-left",type:"target",position:{x:40,y:50}},{id:"uv-right",type:"source",position:{x:120,y:50}}];return e.jsx(Vt,{id:o,selected:t,rotation:p,handles:n,width:Co,height:So,isScadaMode:h,render:()=>e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:"40",y:"30",width:"80",height:"40",rx:"10",fill:"#cfd8dc",stroke:"#333",strokeWidth:"2"}),e.jsx("rect",{x:"50",y:"40",width:"60",height:"20",fill:"#aeefff",stroke:"#00bcd4",strokeWidth:"1.5",rx:"4"}),e.jsx("rect",{x:"55",y:"45",width:"50",height:"10",fill:"#7df9ff",opacity:"0.6",rx:"2"}),e.jsx("text",{x:"80",y:"25",fontSize:"12",textAnchor:"middle",fill:"#000",children:(y==null?void 0:y.label)||"UV Unit"}),e.jsx("text",{x:"80",y:"90",fontSize:"10",textAnchor:"middle",fill:"#666",children:"UV Dezenfeksiyon"})]})})};H.register({id:"uvUnit",label:"UV Unit",labelTr:"UV Ãœnitesi",category:"disinfection",description:"Ultraviolet disinfection chamber",component:Wo,defaultSize:{width:Co,height:So},equipmentTypeCodes:["uv_unit","uv","ultraviolet"]});const St=80,Wt=60,Do={open:{body:"#4CAF50",indicator:"#81C784"},closed:{body:"#F44336",indicator:"#E57373"}},Fo=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,r=(t==null?void 0:t.valveType)||"ball",c=(t==null?void 0:t.isOpen)!==!1,d=c?Do.open:Do.closed,[x,l]=a.useState((t==null?void 0:t.leftType)||"target"),[k,u]=a.useState((t==null?void 0:t.rightType)||"source"),f=b=>b==="source"?"#22c55e":"#3b82f6",g=(b,v,j)=>D=>{if(n)return;D.preventDefault(),D.stopPropagation();const E=b==="source"?"target":"source";v(E),h(C=>C.map(P=>P.id===o?{...P,data:{...P.data,[j]:E}}:P))};a.useEffect(()=>{p(o)},[o,x,k,p]);const m=()=>{switch(r){case"butterfly":return e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:40,cy:25,r:15,fill:"none",stroke:d.body,strokeWidth:3}),e.jsx("line",{x1:40,y1:10,x2:40,y2:40,stroke:d.indicator,strokeWidth:3,transform:c?"rotate(0 40 25)":"rotate(90 40 25)"})]});case"gate":return e.jsxs(e.Fragment,{children:[e.jsx("rect",{x:30,y:15,width:20,height:20,fill:d.body,stroke:"#333",strokeWidth:1}),e.jsx("rect",{x:35,y:c?5:18,width:10,height:12,fill:d.indicator,stroke:"#333",strokeWidth:1})]});case"check":return e.jsxs(e.Fragment,{children:[e.jsx("polygon",{points:"25,15 55,25 25,35",fill:d.body,stroke:"#333",strokeWidth:1}),e.jsx("circle",{cx:35,cy:25,r:3,fill:d.indicator})]});case"ball":default:return e.jsxs(e.Fragment,{children:[e.jsx("polygon",{points:"25,15 40,25 25,35",fill:d.body,stroke:"#333",strokeWidth:1}),e.jsx("polygon",{points:"55,15 40,25 55,35",fill:d.body,stroke:"#333",strokeWidth:1}),e.jsx("circle",{cx:40,cy:25,r:8,fill:d.indicator,stroke:"#333",strokeWidth:1})]})}};return e.jsxs("div",{style:{width:St,height:Wt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:St,height:Wt,viewBox:"0 0 80 60",children:[e.jsx("rect",{x:5,y:20,width:20,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("rect",{x:55,y:20,width:20,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),m(),e.jsx("rect",{x:35,y:2,width:10,height:8,rx:1,fill:"#455A64",stroke:"#37474F",strokeWidth:1}),e.jsx("text",{x:40,y:55,fontSize:8,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||r.toUpperCase()})]}),e.jsx("div",{style:{position:"absolute",left:5,top:25,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:g(x,l,"leftType"),children:e.jsx(i.Handle,{id:`valve-left-${x}`,type:x,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:f(x),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})}),e.jsx("div",{style:{position:"absolute",left:75,top:25,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:g(k,u,"rightType"),children:e.jsx(i.Handle,{id:`valve-right-${k}`,type:k,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:f(k),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"valve",label:"Valve",labelTr:"Vana",category:"distribution",description:"Flow control valve",component:Fo,defaultSize:{width:St,height:Wt},equipmentTypeCodes:["valve","ball_valve","gate_valve","butterfly_valve","check_valve"]});const Dt=100,Ft=80,Ro=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.inputType)||"target"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,inputType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:Dt,height:Ft,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Dt,height:Ft,viewBox:"0 0 100 80",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:`discharge-water-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8D6E63",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#5D4037",stopOpacity:.8})]})}),e.jsx("rect",{x:5,y:35,width:25,height:10,fill:"#78909C",stroke:"#546E7A",strokeWidth:1}),e.jsx("path",{d:"M 10 40 L 25 40 M 20 35 L 25 40 L 20 45",stroke:"#546E7A",strokeWidth:2,fill:"none"}),e.jsx("ellipse",{cx:60,cy:40,rx:30,ry:20,fill:`url(#discharge-water-${o})`,stroke:"#4E342E",strokeWidth:2}),e.jsx("path",{d:"M 50 40 Q 55 35 60 40 Q 65 45 60 50 Q 55 45 60 40",fill:"none",stroke:"#A1887F",strokeWidth:2,opacity:.6}),e.jsx("circle",{cx:60,cy:45,r:5,fill:"#3E2723",stroke:"#5D4037",strokeWidth:1}),e.jsx("path",{d:"M 60 55 L 55 65 M 60 55 L 65 65",stroke:"#5D4037",strokeWidth:2,strokeDasharray:"3,2"}),e.jsx("text",{x:60,y:75,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Discharge"})]}),e.jsx("div",{style:{position:"absolute",left:5,top:40,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`discharge-in-${r}`,type:r,position:i.Position.Left,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"waterDischarge",label:"Water Discharge",labelTr:"Su Desarji",category:"utility",description:"Water discharge/effluent outlet",component:Ro,defaultSize:{width:Dt,height:Ft},equipmentTypeCodes:["water_discharge","effluent","drain","outlet"]});const Rt=100,Pt=80,Po=({id:o,data:t,selected:y})=>{const p=i.useUpdateNodeInternals(),{setNodes:h}=i.useReactFlow(),n=(t==null?void 0:t.isScadaMode)||!1,[r,c]=a.useState((t==null?void 0:t.outputType)||"source"),d=l=>l==="source"?"#22c55e":"#3b82f6",x=l=>{if(n)return;l.preventDefault(),l.stopPropagation();const k=r==="source"?"target":"source";c(k),h(u=>u.map(f=>f.id===o?{...f,data:{...f.data,outputType:k}}:f))};return a.useEffect(()=>{p(o)},[o,r,p]),e.jsxs("div",{style:{width:Rt,height:Pt,position:"relative",border:y?"2px solid #3b82f6":"2px solid transparent",borderRadius:8},children:[e.jsxs("svg",{width:Rt,height:Pt,viewBox:"0 0 100 80",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:`supply-water-${o}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4FC3F7",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#0288D1",stopOpacity:.9})]}),e.jsxs("radialGradient",{id:`supply-wave-${o}`,cx:"50%",cy:"50%",r:"50%",children:[e.jsx("stop",{offset:"0%",stopColor:"#B3E5FC",stopOpacity:.6}),e.jsx("stop",{offset:"100%",stopColor:"#4FC3F7",stopOpacity:0})]})]}),e.jsx("circle",{cx:40,cy:40,r:30,fill:`url(#supply-water-${o})`,stroke:"#0277BD",strokeWidth:2}),e.jsx("circle",{cx:40,cy:40,r:20,fill:`url(#supply-wave-${o})`}),e.jsx("circle",{cx:40,cy:40,r:10,fill:`url(#supply-wave-${o})`}),e.jsx("path",{d:"M 35 30 Q 35 25 38 28 Q 40 22 42 28 Q 45 25 45 30 Z",fill:"#B3E5FC"}),e.jsx("path",{d:"M 33 45 Q 33 40 36 43 Q 38 37 40 43 Q 43 40 43 45 Z",fill:"#B3E5FC",opacity:.7}),e.jsx("path",{d:"M 70 40 L 85 40 L 80 35 M 85 40 L 80 45",stroke:"#0288D1",strokeWidth:2,fill:"none"}),e.jsx("rect",{x:70,y:35,width:25,height:10,fill:"#42A5F5",stroke:"#1E88E5",strokeWidth:1}),e.jsx("text",{x:40,y:75,fontSize:9,fill:"#333",textAnchor:"middle",children:(t==null?void 0:t.label)||"Water Supply"})]}),e.jsx("div",{style:{position:"absolute",left:95,top:40,width:12,height:12,transform:"translate(-50%, -50%)",pointerEvents:"all"},onContextMenu:x,children:e.jsx(i.Handle,{id:`supply-out-${r}`,type:r,position:i.Position.Right,style:{position:"relative",width:"100%",height:"100%",background:d(r),borderRadius:"50%",border:"2px solid white",cursor:n?"default":"pointer",transform:"none",left:0,top:0}})})]})};H.register({id:"waterSupply",label:"Water Supply",labelTr:"Su Temini",category:"utility",description:"Water supply/intake source",component:Po,defaultSize:{width:Rt,height:Pt},equipmentTypeCodes:["water_supply","intake","water_source"]});const ks=H.getNodeTypes(),ms=()=>H.getPaletteItems(),vs=()=>H.getPaletteGroups(),Ce=[{id:"process-pipe",label:"Process Piping",color:"#1f2937",strokeWidth:3,strokeDasharray:"",description:"Main process flow lines"},{id:"electrical",label:"Electrical Signal",color:"#dc2626",strokeWidth:2,strokeDasharray:"8,4",description:"4-20mA, voltage signals"},{id:"pneumatic",label:"Pneumatic Signal",color:"#2563eb",strokeWidth:2,strokeDasharray:"12,3,3,3",description:"Air/gas signal connections"},{id:"hydraulic",label:"Hydraulic Line",color:"#16a34a",strokeWidth:2,strokeDasharray:"12,4,4,4",description:"Hydraulic fluid connections"},{id:"instrument",label:"Instrument Signal",color:"#ea580c",strokeWidth:2,strokeDasharray:"8,3,2,3",description:"Sensor and control signals"},{id:"data-link",label:"Data/Communication",color:"#7c3aed",strokeWidth:2,strokeDasharray:"2,4",description:"Digital data transmission"},{id:"capillary",label:"Capillary Tube",color:"#6b7280",strokeWidth:1,strokeDasharray:"",description:"Capillary connections"},{id:"steam",label:"Steam Line",color:"#f97316",strokeWidth:3,strokeDasharray:"6,2",description:"Steam process lines"},{id:"drain-vent",label:"Drain/Vent",color:"#0891b2",strokeWidth:2,strokeDasharray:"4,4,1,4",description:"Drainage and ventilation"}],Ts="process-pipe",Ao=o=>{const t=Mo(o);return Ce.find(y=>y.id===t)??Ce[0]},Mo=o=>{switch(o){case"pipe":case"default":return"process-pipe";case"cable":return"electrical";case"signal":return"instrument";default:return Ce.some(t=>t.id===o)?o:"process-pipe"}},Se=o=>{const t=Ao(o);return{stroke:t.color,strokeWidth:t.strokeWidth,strokeDasharray:t.strokeDasharray||void 0}},le=5,ws=5,Es=8,Io=20,Cs=o=>o.length<2?"":o.map((t,y)=>`${y===0?"M":"L"}${t.x},${t.y}`).join(" "),Ss=(o,t="#374151")=>{if(o.length<2)return null;const y=o[o.length-1],p=o[o.length-2],h=Math.atan2(y.y-p.y,y.x-p.x)*(180/Math.PI);return e.jsx("polygon",{points:"0,-5 12,0 0,5",fill:t,transform:`translate(${y.x},${y.y}) rotate(${h})`,style:{pointerEvents:"none"}})},Ws=(o,t,y)=>{let p=0,h=1/0;for(let n=0;n<o.length-1;n++){const r=o[n],c=o[n+1],d=c.x-r.x,x=c.y-r.y,l=Math.sqrt(d*d+x*x);if(l===0)continue;let k=((t-r.x)*d+(y-r.y)*x)/(l*l);k=Math.max(0,Math.min(1,k));const u=r.x+k*d,f=r.y+k*x,g=Math.sqrt((t-u)**2+(y-f)**2);g<h&&(h=g,p=n)}return p};function At(o){const{id:t,sourceX:y,sourceY:p,targetX:h,targetY:n,style:r={},data:c,selected:d}=o,{setEdges:x}=i.useReactFlow(),l=a.useRef(null),k=(c==null?void 0:c.points)??[{x:y,y:p,locked:!0},{x:(y+h)/2,y:p,locked:!1},{x:(y+h)/2,y:n,locked:!1},{x:h,y:n,locked:!0}],[u,f]=a.useState(k),[g,m]=a.useState(null),[b,v]=a.useState(null),[j,D]=a.useState(""),E=(c==null?void 0:c.connectionType)||"process-pipe",C=Se(E);a.useEffect(()=>{f(R=>{const w=[...R];return w.length<2||(w[0]={...w[0],x:y,y:p},w[w.length-1]={...w[w.length-1],x:h,y:n}),w})},[y,p,h,n]),a.useEffect(()=>{D(Cs(u)),x(R=>R.map(w=>w.id===t?{...w,data:{...w.data,points:u}}:w))},[u,t,x]);const P=a.useCallback((R,w)=>{if(R.stopPropagation(),R.preventDefault(),u[w].locked)return;const F=R.clientX,M=R.clientY,{x:B,y:U}=u[w],Q=X=>{const K=X.clientX-F,te=X.clientY-M,ie=Math.round((B+K)/le)*le,ae=Math.round((U+te)/le)*le;f(ve=>{const pe=[...ve];return pe[w]={...pe[w],x:ie,y:ae},pe})},J=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",J)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",J)},[u]),L=a.useCallback(R=>{var X;R.stopPropagation(),R.preventDefault();const w=R.target.ownerSVGElement;if(!w)return;const F=w.createSVGPoint();F.x=R.clientX,F.y=R.clientY;const M=F.matrixTransform((X=w.getScreenCTM())==null?void 0:X.inverse()),B=M.x,U=M.y,Q=Ws(u,B,U),J={x:Math.round(B/le)*le,y:Math.round(U/le)*le,locked:!1};f(K=>{const te=[...K];return te.splice(Q+1,0,J),te})},[u]),z=a.useCallback((R,w)=>{R.stopPropagation(),R.preventDefault(),!u[w].locked&&(u.length<=2||f(F=>F.filter((M,B)=>B!==w)))},[u]),Y=a.useCallback(R=>{var B;const w=R.target.ownerSVGElement;if(!w)return;const F=w.createSVGPoint();F.x=R.clientX,F.y=R.clientY;const M=F.matrixTransform((B=w.getScreenCTM())==null?void 0:B.inverse());v({x:M.x,y:M.y})},[]),O=a.useCallback(()=>{v(null)},[]);return e.jsxs("g",{className:"react-flow__edge-multihandle",children:[e.jsx("path",{d:j,fill:"none",stroke:"transparent",strokeWidth:Io,style:{cursor:"pointer"},onMouseMove:Y,onMouseLeave:O}),e.jsx("path",{ref:l,id:t,d:j,className:"react-flow__edge-path",fill:"none",style:{pointerEvents:"none",stroke:C.stroke,strokeWidth:C.strokeWidth,strokeDasharray:C.strokeDasharray,...r}}),d&&e.jsx("path",{d:j,fill:"none",stroke:"#3b82f6",strokeWidth:(C.strokeWidth||2)+4,strokeOpacity:.3,style:{pointerEvents:"none"}}),Ss(u,C.stroke),b&&e.jsx("circle",{cx:b.x,cy:b.y,r:4,fill:"#10b981",fillOpacity:.5,stroke:"#10b981",strokeWidth:1,style:{pointerEvents:"none"}}),u.map((R,w)=>e.jsx("circle",{cx:R.x,cy:R.y,r:g===w?Es:ws,fill:R.locked?"#6b7280":"#f97316",stroke:R.locked?"#374151":"#ea580c",strokeWidth:1.5,style:{pointerEvents:"all",cursor:R.locked?"not-allowed":"grab",transition:"r 0.1s ease-out"},onMouseDown:F=>P(F,w),onContextMenu:F=>z(F,w),onMouseEnter:()=>m(w),onMouseLeave:()=>m(null)},w)),(c==null?void 0:c.label)&&e.jsx("text",{children:e.jsx("textPath",{href:`#${t}`,startOffset:"50%",textAnchor:"middle",style:{fontSize:11,fill:"#374151",fontWeight:500},children:c.label})}),e.jsx("path",{d:j,fill:"none",stroke:"transparent",strokeWidth:Io,style:{cursor:"crosshair",pointerEvents:"stroke"},onDoubleClick:L})]})}const ce=5,We=5,De=8,Ho=16,_o=(o,t,y="auto")=>{const p=t.x-o.x,h=t.y-o.y,n=y==="auto"?Math.abs(p)>=Math.abs(h)?"horizontal-first":"vertical-first":y,r=o.x+p/2,c=o.y+h/2;return n==="horizontal-first"?[{x:r,y:o.y},{x:r,y:t.y}]:[{x:o.x,y:c},{x:t.x,y:c}]},Ds=(o,t,y)=>{const p=[o,...y,t];if(p.length<2)return"";let h=`M${p[0].x},${p[0].y}`;for(let n=1;n<p.length;n++){const r=p[n-1],c=p[n];Math.abs(r.x-c.x)<1?h+=` V${c.y}`:Math.abs(r.y-c.y)<1?h+=` H${c.x}`:h+=` H${c.x} V${c.y}`}return h},Fs=(o,t,y,p="#374151")=>{const h=[o,...y,t];if(h.length<2)return null;const n=h[h.length-1],r=h[h.length-2],c=Math.atan2(n.y-r.y,n.x-r.x)*(180/Math.PI);return e.jsx("polygon",{points:"0,-5 12,0 0,5",fill:p,transform:`translate(${n.x},${n.y}) rotate(${c})`,style:{pointerEvents:"none"}})},Rs=(o,t,y,p,h)=>{const n=[o,...y,t];let r=0,c=1/0;for(let d=0;d<n.length-1;d++){const x=n[d],l=n[d+1],k=Math.abs(x.x-l.x)<1;let u;if(k){const f=Math.min(x.y,l.y),g=Math.max(x.y,l.y);h>=f&&h<=g?u=Math.abs(p-x.x):u=1/0}else{const f=Math.min(x.x,l.x),g=Math.max(x.x,l.x);p>=f&&p<=g?u=Math.abs(h-x.y):u=1/0}u<c&&(c=u,r=d)}return r};function No(o){const{id:t,sourceX:y,sourceY:p,targetX:h,targetY:n,style:r={},data:c,selected:d}=o,{setEdges:x}=i.useReactFlow(),l={x:y,y:p},k={x:h,y:n},u=(c==null?void 0:c.routingMode)||"auto",f=a.useMemo(()=>(c==null?void 0:c.bendPoints)??_o(l,k,u),[]),[g,m]=a.useState(f),[b,v]=a.useState(null),[j,D]=a.useState(null),E=(c==null?void 0:c.connectionType)||"process-pipe",C=Se(E);a.useEffect(()=>{(!(c!=null&&c.bendPoints)||c.bendPoints.length===0)&&m(_o(l,k,u))},[y,p,h,n,u]);const P=a.useMemo(()=>Ds(l,k,g),[l,k,g]);a.useEffect(()=>{x(w=>w.map(F=>F.id===t?{...F,data:{...F.data,bendPoints:g}}:F))},[g,t,x]);const L=a.useCallback((w,F)=>{w.stopPropagation(),w.preventDefault();const M=w.clientX,B=w.clientY,{x:U,y:Q}=g[F],J=K=>{const te=K.clientX-M,ie=K.clientY-B,ae=Math.round((U+te)/ce)*ce,ve=Math.round((Q+ie)/ce)*ce;m(pe=>{const fe=[...pe];return fe[F]={x:ae,y:ve},fe})},X=()=>{window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",X)};window.addEventListener("mousemove",J),window.addEventListener("mouseup",X)},[g]),z=a.useCallback(w=>{var K;w.stopPropagation(),w.preventDefault();const F=w.target.ownerSVGElement;if(!F)return;const M=F.createSVGPoint();M.x=w.clientX,M.y=w.clientY;const B=M.matrixTransform((K=F.getScreenCTM())==null?void 0:K.inverse()),U=Math.round(B.x/ce)*ce,Q=Math.round(B.y/ce)*ce,J=Rs(l,k,g,U,Q),X={x:U,y:Q};m(te=>{const ie=[...te];return ie.splice(J,0,X),ie})},[g,l,k]),Y=a.useCallback((w,F)=>{w.stopPropagation(),w.preventDefault(),!(g.length<=1)&&m(M=>M.filter((B,U)=>U!==F))},[g]),O=a.useCallback(w=>{var U;const F=w.target.ownerSVGElement;if(!F)return;const M=F.createSVGPoint();M.x=w.clientX,M.y=w.clientY;const B=M.matrixTransform((U=F.getScreenCTM())==null?void 0:U.inverse());D({x:B.x,y:B.y})},[]),R=a.useCallback(()=>{D(null)},[]);return e.jsxs("g",{className:"react-flow__edge-orthogonal",children:[e.jsx("path",{d:P,fill:"none",stroke:"transparent",strokeWidth:Ho,style:{cursor:"pointer"},onMouseMove:O,onMouseLeave:R}),e.jsx("path",{id:t,d:P,className:"react-flow__edge-path",fill:"none",style:{pointerEvents:"none",stroke:C.stroke,strokeWidth:C.strokeWidth,strokeDasharray:C.strokeDasharray,strokeLinejoin:"round",strokeLinecap:"round",...r}}),d&&e.jsx("path",{d:P,fill:"none",stroke:"#3b82f6",strokeWidth:(C.strokeWidth||2)+4,strokeOpacity:.3,strokeLinejoin:"round",style:{pointerEvents:"none"}}),Fs(l,k,g,C.stroke),j&&e.jsx("circle",{cx:j.x,cy:j.y,r:4,fill:"#10b981",fillOpacity:.5,stroke:"#10b981",strokeWidth:1,style:{pointerEvents:"none"}}),g.map((w,F)=>e.jsx("g",{children:e.jsx("rect",{x:w.x-(b===F?De:We),y:w.y-(b===F?De:We),width:(b===F?De:We)*2,height:(b===F?De:We)*2,rx:2,fill:"#8b5cf6",stroke:"#7c3aed",strokeWidth:1.5,style:{pointerEvents:"all",cursor:"grab",transition:"all 0.1s ease-out"},onMouseDown:M=>L(M,F),onContextMenu:M=>Y(M,F),onMouseEnter:()=>v(F),onMouseLeave:()=>v(null)})},F)),(c==null?void 0:c.label)&&e.jsx("text",{children:e.jsx("textPath",{href:`#${t}`,startOffset:"50%",textAnchor:"middle",style:{fontSize:11,fill:"#374151",fontWeight:500},children:c.label})}),e.jsx("path",{d:P,fill:"none",stroke:"transparent",strokeWidth:Ho,style:{cursor:"crosshair",pointerEvents:"stroke"},onDoubleClick:z})]})}const Bo=8,Oo=10,Go=(o,t,y,p,h="#374151")=>{const n=Math.atan2(t-p,o-y)*(180/Math.PI);return e.jsx("polygon",{points:"0,-5 12,0 0,5",fill:h,transform:`translate(${o},${t}) rotate(${n})`,style:{pointerEvents:"none"}})};function Lo(o){const{id:t,sourceX:y,sourceY:p,targetX:h,targetY:n,style:r={},data:c,selected:d}=o,{setEdges:x}=i.useReactFlow(),l=(c==null?void 0:c.curveType)||"quadratic",k=(c==null?void 0:c.showGuides)??!0,u=(c==null?void 0:c.connectionType)||"process-pipe",f=Se(u),g={x:(y+h)/2+40,y:(p+n)/2-40},m={x:(y+h)/2-40,y:(p+n)/2+40},[b,v]=a.useState((c==null?void 0:c.controlPoint)??g),[j,D]=a.useState((c==null?void 0:c.controlPoint2)??m),[E,C]=a.useState(null),[P,L]=a.useState("");a.useEffect(()=>{L(l==="cubic"?`M${y},${p} C${b.x},${b.y} ${j.x},${j.y} ${h},${n}`:`M${y},${p} Q${b.x},${b.y} ${h},${n}`)},[y,p,h,n,b,j,l]),a.useEffect(()=>{x(O=>O.map(R=>R.id===t?{...R,data:{...R.data,controlPoint:b,...l==="cubic"?{controlPoint2:j}:{}}}:R))},[b,j,t,l,x]);const z=a.useCallback((O,R)=>{O.stopPropagation(),O.preventDefault();const w=O.clientX,F=O.clientY,M=R===1?b:j,{x:B,y:U}=M,Q=X=>{const K=X.clientX-w,te=X.clientY-F,ie={x:B+K,y:U+te};R===1?v(ie):D(ie)},J=()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",J)};window.addEventListener("mousemove",Q),window.addEventListener("mouseup",J)},[b,j]),Y=l==="cubic"?`M${y},${p} L${b.x},${b.y} L${j.x},${j.y} L${h},${n}`:`M${y},${p} L${b.x},${b.y} L${h},${n}`;return e.jsxs("g",{className:"react-flow__edge-draggable",children:[k&&d&&e.jsx("path",{d:Y,fill:"none",stroke:"#d1d5db",strokeWidth:1,strokeDasharray:"4,3",style:{pointerEvents:"none"}}),e.jsx("path",{id:t,d:P,className:"react-flow__edge-path",fill:"none",style:{pointerEvents:"stroke",stroke:f.stroke,strokeWidth:f.strokeWidth,strokeDasharray:f.strokeDasharray,strokeLinecap:"round",...r}}),d&&e.jsx("path",{d:P,fill:"none",stroke:"#3b82f6",strokeWidth:(f.strokeWidth||2)+4,strokeOpacity:.3,style:{pointerEvents:"none"}}),l==="cubic"?Go(h,n,j.x,j.y,f.stroke):Go(h,n,b.x,b.y,f.stroke),e.jsx("circle",{cx:b.x,cy:b.y,r:E===1?Oo:Bo,fill:"#f97316",stroke:"#ea580c",strokeWidth:2,style:{pointerEvents:"all",cursor:"grab",transition:"r 0.1s ease-out"},onMouseDown:O=>z(O,1),onMouseEnter:()=>C(1),onMouseLeave:()=>C(null)}),l==="cubic"&&e.jsx("circle",{cx:j.x,cy:j.y,r:E===2?Oo:Bo,fill:"#8b5cf6",stroke:"#7c3aed",strokeWidth:2,style:{pointerEvents:"all",cursor:"grab",transition:"r 0.1s ease-out"},onMouseDown:O=>z(O,2),onMouseEnter:()=>C(2),onMouseLeave:()=>C(null)}),d&&e.jsxs(e.Fragment,{children:[e.jsx("circle",{cx:y,cy:p,r:4,fill:"#22c55e",stroke:"#16a34a",strokeWidth:1.5,style:{pointerEvents:"none"}}),e.jsx("circle",{cx:h,cy:n,r:4,fill:"#ef4444",stroke:"#dc2626",strokeWidth:1.5,style:{pointerEvents:"none"}})]}),(c==null?void 0:c.label)&&e.jsx("text",{children:e.jsx("textPath",{href:`#${t}`,startOffset:"50%",textAnchor:"middle",style:{fontSize:11,fill:"#374151",fontWeight:500},children:c.label})})]})}const Ps={multiHandle:At,draggable:Lo,orthogonal:No,default:At},As=[{value:"multiHandle",label:"Polyline (Draggable)",description:"Multiple waypoints with draggable control points"},{value:"orthogonal",label:"Orthogonal (90Â°)",description:"Right-angle routing with adjustable bends"},{value:"draggable",label:"Bezier Curve",description:"Smooth curves with control points"}],zo=a.createContext({sensorData:{}}),Ms=({sensorData:o,children:t})=>e.jsx(zo.Provider,{value:{sensorData:o},children:t}),Uo=()=>a.useContext(zo),Is=o=>{switch(o){case"critical":return"critical";case"warning":return"warning";default:return"normal"}},Hs=o=>{switch(o){case"critical":return"#ef4444";case"warning":return"#eab308";default:return"#22c55e"}};function Yo(o){const t=y=>{const{data:p}=y,{sensorData:h}=Uo(),n=p==null?void 0:p.equipmentId,r=n?h[n]||[]:[],c=r.some(x=>x.status==="warning"||x.status==="critical"),d=r.some(x=>x.status==="critical");return e.jsxs("div",{className:"scada-node-wrapper",style:{position:"relative"},children:[e.jsx(o,{...y}),r.length>0&&e.jsx("div",{style:{position:"absolute",top:-8,right:-8,zIndex:20,display:"flex",flexDirection:"column",gap:2,alignItems:"flex-end"},children:r.slice(0,3).map((x,l)=>e.jsxs("span",{className:`sensor-badge ${Is(x.status)}`,style:{padding:"2px 6px",borderRadius:4,fontSize:10,fontWeight:"bold",backgroundColor:x.status==="critical"?"#fee2e2":x.status==="warning"?"#fef9c3":"#dcfce7",color:x.status==="critical"?"#dc2626":x.status==="warning"?"#ca8a04":"#16a34a",border:`1px solid ${Hs(x.status)}`},children:[x.value.toFixed(1)," ",x.unit]},l))}),c&&e.jsx("div",{style:{position:"absolute",top:-4,left:-4,width:12,height:12,borderRadius:"50%",backgroundColor:d?"#ef4444":"#eab308",animation:"pulse 1.5s infinite",zIndex:20}})]})};return t.displayName=`Scada(${o.displayName||o.name||"Component"})`,t}function _s(o){const t={};return Object.entries(o).forEach(([y,p])=>{t[y]=Yo(p)}),t}S.AlgaeBagNode=Yt,S.AutomaticFeederNode=$t,S.BaseNode=Vt,S.BlowerNode=Xt,S.CATEGORY_LABELS=Ut,S.CATEGORY_ORDER=zt,S.CONNECTION_TYPES=Ce,S.ChillerNode=Qt,S.CleanWaterTankNode=Jt,S.ConnectionPointNode=Zt,S.DEFAULT_CONNECTION_TYPE=Ts,S.DemandFeederNode=Kt,S.DieselGeneratorNode=qt,S.DirtyWaterTankNode=eo,S.DosingPumpNode=to,S.DraggableEdge=Lo,S.DrumFilterNode=io,S.DualDrainTankNode=ro,S.EDGE_TYPE_OPTIONS=As,S.EQUIPMENT_CATEGORIES=us,S.EQUIPMENT_TYPES=we,S.EquipmentNode=ot,S.FishTankNode=ao,S.GasGeneratorNode=fo,S.HEPAFilterNode=xo,S.HeaterNode=uo,S.MBBRNode=yo,S.MultiHandleEdge=At,S.NodeRegistry=H,S.OrthogonalEdge=No,S.OxygenGeneratorNode=go,S.OzoneGeneratorNode=bo,S.PlateHeatExchangerNode=jo,S.PumpNode=ko,S.RadialSettlerNode=mo,S.SIZES=ee,S.ScadaProvider=Ms,S.SensorNode=vo,S.ShellTubeHeatExchangerNode=To,S.TankInletNode=wo,S.UVUnitNode=Wo,S.UltrafiltrationNode=Eo,S.ValveNode=Fo,S.WaterDischargeNode=Ro,S.WaterSupplyNode=Po,S.createScadaNode=Yo,S.createScadaNodeTypes=_s,S.edgeTypes=Ps,S.getAllEquipmentTypes=as,S.getConnectionTypeConfig=Ao,S.getEdgeStyle=Se,S.getEquipmentSize=lo,S.getEquipmentTypeConfig=no,S.getEquipmentTypesByCategory=fs,S.getPaletteGroups=vs,S.getPaletteItems=ms,S.nodeTypes=ks,S.normalizeConnectionType=Mo,S.rotatePoint=de,S.rotatePointCSS=ps,S.useScadaData=Uo,Object.defineProperty(S,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=aquaculture-nodes.umd.js.map
